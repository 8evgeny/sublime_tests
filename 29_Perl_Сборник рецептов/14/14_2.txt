Пример 14.2. db2gdbm
#!/usr/bin/perl -w
# db2gdbm: преобразование DB в GDBM

use strict;

use DB_File;
use GDBM_File;

unless (@ARGV == 2) {
    die "usage: db2gdbm infile outfile\n";
}

my ($infile, $outfile) = @ARGV;                     
my (%db_in, %db_out);                               

# Открыть файлы
tie(%db_in, 'DB_File', $infile)
    or die "Can’t tie $infile: $!";
tie(%db_out, 'GDBM_File', $outfile, GDBM_WRCREAT, 0666)
    or die "Can't tie $outfile: $!";

# Скопировать данные (не пользуйтесь %db_out = %db_in,
# потому что для больших баз это работает медленно)
while (my($k, $v) = each %db_in) {
    $db_out{$k} = $v;
}

# Функции untie вызываются автоматически при завершении программы
untie %db_in;
untie %db_out;



[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: zwzww*@
Подстока 2 файла ../Dir/file1: @@##xnnx
Подстока 3 файла ../Dir/file1: nedyeyd*eu
Подстока 4 файла ../Dir/file1: ikrr88
Подстока 5 файла ../Dir/file1: 388*33jj
Подстока 6 файла ../Dir/file1: jjrryyryyfc
Подстока 7 файла ../Dir/file1: hhc**e*ke

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: zwzww*@
Подстока 2 файла ../Dir/file1: @@##xnnx
Подстока 3 файла ../Dir/file1: nedyeyd*eu
Подстока 4 файла ../Dir/file1: ikrr88
Подстока 5 файла ../Dir/file1: 388*33jj
Подстока 6 файла ../Dir/file1: jjrryyryyfc
Подстока 7 файла ../Dir/file1: hhc**e*ke

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: zwzww*@
Подстока 2 файла ../Dir/file1: @@##xnnx
Подстока 3 файла ../Dir/file1: nedyeyd*eu
Подстока 4 файла ../Dir/file1: ikrr88
Подстока 5 файла ../Dir/file1: 388*33jj
Подстока 6 файла ../Dir/file1: jjrryyryyfc
Подстока 7 файла ../Dir/file1: hhc**e*ke

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: zwzww*@
Подстока 2 файла ../Dir/file1: @@##xnnx
Подстока 3 файла ../Dir/file1: nedyeyd*eu
Подстока 4 файла ../Dir/file1: ikrr88
Подстока 5 файла ../Dir/file1: 388*33jj
Подстока 6 файла ../Dir/file1: jjrryyryyfc
Подстока 7 файла ../Dir/file1: hhc**e*ke

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: T
Подстока 2 файла ../Dir/file1: intT
Подстока 3 файла ../Dir/file1: int,U
Подстока 4 файла ../Dir/file1: doubleFunctiontemplatesmayonlybefullyspecialized:template<typenameT,typenameU>voidfoo
Подстока 5 файла ../Dir/file1: Tt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 6 файла ../Dir/file1: template<>voidfoo<int,int>
Подстока 7 файла ../Dir/file1: inta1,inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke_foo
Подстока 8 файла ../Dir/file1: ){foo
Подстока 9 файла ../Dir/file1: 1,2
Подстока 10 файла ../Dir/file1: 1);//Prints"Generalcase:12
Подстока 11 файла ../Dir/file1: 1"foo
Подстока 12 файла ../Dir/file1: 1,2);//Prints"Twoints:12"}GoalKicker
Подстока 13 файла ../Dir/file1: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotallowed
Подстока 14 файла ../Dir/file1: template<typenameU>voidfoo<std::string,U>
Подстока 15 файла ../Dir/file1: std::stringt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 16 файла ../Dir/file1: 6:TemplateSpecializationYoucandefineimplementationforspecificinstantiationsofatemplateclass/method
Подстока 17 файла ../Dir/file1: Forexampleifyouhave:template<typenameT>Tsqrt
Подстока 18 файла ../Dir/file1: Tt){/*Somegenericimplementation*/}Youcanthenwrite:template<>intsqrt<int>
Подстока 19 файла ../Dir/file1: inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt
Подстока 20 файла ../Dir/file1: 4
Подстока 21 файла ../Dir/file1: 0)willgetthegenericimplementationwhereassqrt
Подстока 22 файла ../Dir/file1: 4)willgetthespecializedimplementation
Подстока 23 файла ../Dir/file1: Section77
Подстока 24 файла ../Dir/file1: 7:AliastemplateVersion≥C++11Basicexample:template<typenameT>usingpointer
Подстока 25 файла ../Dir/file1: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 26 файла ../Dir/file1: Forexample:pointer<int>p
Подстока 27 файла ../Dir/file1: newint;//equivalentto:int*p
Подстока 28 файла ../Dir/file1: newint;Aliastemplatescannotbespecialized
Подстока 29 файла ../Dir/file1: However,thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:template<typenameT>structnonconst_pointer_helper{typedefT*type;};template<typenameT>structnonconst_pointer_helper<Tconst>{typedefT*type;};template<typenameT>usingnonconst_pointer
Подстока 30 файла ../Dir/file1: nonconst_pointer_helper<T>::type;Section77
Подстока 31 файла ../Dir/file1: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass,function,orvariablefromatemplate,withoutusingitjustyet
Подстока 32 файла ../Dir/file1: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 33 файла ../Dir/file1: Thiscanbeusedtoavoiddefiningatemplateinaheaderfile,ifitwillonlybeinstantiatedwithafinitesetofarguments
Подстока 34 файла ../Dir/file1: Forexample://print_string
Подстока 35 файла ../Dir/file1: htemplate<classT>voidprint_string
Подстока 36 файла ../Dir/file1: constT*str);GoalKicker
Подстока 37 файла ../Dir/file1: com–C++NotesforProfessionals420//print_string
Подстока 38 файла ../Dir/file1: cpp#include"print_string
Подстока 39 файла ../Dir/file1: h"templatevoidprint_string
Подстока 40 файла ../Dir/file1: constchar*);templatevoidprint_string
Подстока 41 файла ../Dir/file1: constwchar_t*);Becauseprint_string<char>andprint_string<wchar_t>areexplicitlyinstantiatedinprint_string
Подстока 42 файла ../Dir/file1: cpp,thelinkerwillbeabletofindthemeventhoughtheprint_stringtemplateisnotdefinedintheheader
Подстока 43 файла ../Dir/file1: Iftheseexplicitinstantiationdeclarationswerenotpresent,alinkererrorwouldlikelyoccur
Подстока 44 файла ../Dir/file1: SeeWhycantemplatesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword,itbecomesanexplicitinstantiationdeclarationinstead
Подстока 45 файла ../Dir/file1: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 46 файла ../Dir/file1: Instead,areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 47 файла ../Dir/file1: foo
Подстока 48 файла ../Dir/file1: h#ifndefFOO_H#defineFOO_Htemplate<classT>voidfoo
Подстока 49 файла ../Dir/file1: Tx){//complicatedimplementation}#endiffoo
Подстока 50 файла ../Dir/file1: cpp#include"foo
Подстока 51 файла ../Dir/file1: h"//explicitinstantiationdefinitionsforcommoncasestemplatevoidfoo
Подстока 52 файла ../Dir/file1: int);templatevoidfoo
Подстока 53 файла ../Dir/file1: double);main
Подстока 54 файла ../Dir/file1: cpp#include"foo
Подстока 55 файла ../Dir/file1: h"//wealreadyknowfoo
Подстока 56 файла ../Dir/file1: cpphasexplicitinstantiationdefinitionsfortheseexterntemplatevoidfoo
Подстока 57 файла ../Dir/file1: double);intmain
Подстока 58 файла ../Dir/file1: ){foo
Подстока 59 файла ../Dir/file1: 42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 60 файла ../Dir/file1: cppprovidesanexplicitinstantiationalready!foo
Подстока 61 файла ../Dir/file1: 3
Подстока 62 файла ../Dir/file1: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 63 файла ../Dir/file1: cppinstead}Section77
Подстока 64 файла ../Dir/file1: 9:Non-typetemplateparameterApartfromtypesasatemplateparameterweareallowedtodeclarevaluesofconstantexpressionsmeetingoneofthefollowingcriteria:integralorenumerationtype,pointertoobjectorpointertofunction,lvaluereferencetoobjectorlvaluereferencetofunction,pointertomember,std::nullptr_t
Подстока 65 файла ../Dir/file1: GoalKicker
Подстока 66 файла ../Dir/file1: com–C++NotesforProfessionals421Likealltemplateparameters,non-typetemplateparameterscanbeexplicitlyspecified,defaulted,orderivedimplicitlyviaTemplateArgumentDeduction
Подстока 67 файла ../Dir/file1: Exampleofnon-typetemplateparameterusage:#include<iostream>template<typenameT,std::size_tsize>std::size_tsize_of
Подстока 68 файла ../Dir/file1: T
Подстока 69 файла ../Dir/file1: &anArray)[size])//Passarraybyreference
Подстока 70 файла ../Dir/file1: Requires
Подстока 71 файла ../Dir/file1: {//anexactsize
Подстока 72 файла ../Dir/file1: Weallowallsizesreturnsize;//byusingatemplate"size"
Подстока 73 файла ../Dir/file1: }intmain
Подстока 74 файла ../Dir/file1: ){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size_of
Подстока 75 файла ../Dir/file1: anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 76 файла ../Dir/file1: {1,2,3,4,5,6,7,8,9};std::cout<<"anArrayOfData:"<<size_of
Подстока 77 файла ../Dir/file1: anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetemplateparameters:#include<array>intmain
Подстока 78 файла ../Dir/file1: ){std::array<int,5>foo;//intisatypeparameter,5isnon-type}Non-typetemplateparametersareoneofthewaystoachievetemplaterecurrenceandenablestodoMetaprogramming
Подстока 79 файла ../Dir/file1: Section77
Подстока 80 файла ../Dir/file1: 10:Declaringnon-typetemplateargumentswithautoPriortoC++17,whenwritingatemplatenon-typeparameter,youhadtospecifyitstypefirst
Подстока 81 файла ../Dir/file1: Soacommonpatternbecamewritingsomethinglike:template<classT,TN>structintegral_constant{usingtype
Подстока 82 файла ../Dir/file1: T;staticconstexprTvalue
Подстока 83 файла ../Dir/file1: N;};usingfive
Подстока 84 файла ../Dir/file1: integral_constant<int,5>;Butforcomplicatedexpressions,usingsomethinglikethisinvolveshavingtowritedecltype
Подстока 85 файла ../Dir/file1: expr),exprwheninstantiatingtemplates
Подстока 86 файла ../Dir/file1: Thesolutionistosimplifythisidiomandsimplyallowauto:Version≥C++17template<autoN>structintegral_constant{usingtype
Подстока 87 файла ../Dir/file1: decltype
Подстока 88 файла ../Dir/file1: N);staticconstexprtypevalue
Подстока 89 файла ../Dir/file1: N;};GoalKicker
Подстока 90 файла ../Dir/file1: com–C++NotesforProfessionals422usingfive
Подстока 91 файла ../Dir/file1: integral_constant<5>;Emptycustomdeleterforunique_ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique_ptr
Подстока 92 файла ../Dir/file1: DifferentCAPIdeletershavedifferentreturntypes,butwedon'tcare-wejustwantsomethingtoworkforanyfunction:template<autoDeleteFn>structFunctionDeleter{template<classT>voidoperator
Подстока 93 файла ../Dir/file1: )
Подстока 94 файла ../Dir/file1: T*ptr)const{DeleteFn
Подстока 95 файла ../Dir/file1: ptr);}};template<T,autoDeleteFn>usingunique_ptr_deleter
Подстока 96 файла ../Dir/file1: std::unique_ptr<T,FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatemplatenon-typeparameter,regardlessofreturntype,andgetano-sizeoverheadunique_ptroutofit:unique_ptr_deleter<std::FILE,std::fclose>p;Section77
Подстока 97 файла ../Dir/file1: 11:TemplatetemplateparametersSometimeswewouldliketopassintothetemplateatemplatetypewithoutfixingitsvalues
Подстока 98 файла ../Dir/file1: Thisiswhattemplatetemplateparametersarecreatedfor
Подстока 99 файла ../Dir/file1: Verysimpletemplatetemplateparameterexamples:template<classT>structTag1{};template<classT>structTag2{};template<template<class>classTag>structIntTag{typedefTag<int>type;};intmain
Подстока 100 файла ../Dir/file1: ){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>template<classT,template<class
Подстока 101 файла ../Dir/file1: 
Подстока 102 файла ../Dir/file1: 
Подстока 103 файла ../Dir/file1: >classC,classU>C<T>cast_all
Подстока 104 файла ../Dir/file1: constC<U>&c){C<T>result
Подстока 105 файла ../Dir/file1: c
Подстока 106 файла ../Dir/file1: begin
Подстока 107 файла ../Dir/file1: ),c
Подстока 108 файла ../Dir/file1: end
Подстока 109 файла ../Dir/file1: ));returnresult;}intmain
Подстока 110 файла ../Dir/file1: ){std::vector<float>vf
Подстока 111 файла ../Dir/file1: {1
Подстока 112 файла ../Dir/file1: 2,2
Подстока 113 файла ../Dir/file1: 6,3
Подстока 114 файла ../Dir/file1: 7};autovi
Подстока 115 файла ../Dir/file1: cast_all<int>
Подстока 116 файла ../Dir/file1: vf);for
Подстока 117 файла ../Dir/file1: auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 118 файла ../Dir/file1: com–C++NotesforProfessionals423}Section77
Подстока 119 файла ../Dir/file1: 12:DefaulttemplateparametervalueJustlikeincaseofthefunctionarguments,templateparameterscanhavetheirdefaultvalues
Подстока 120 файла ../Dir/file1: Alltemplateparameterswithadefaultvaluehavetobedeclaredattheendofthetemplateparameterlist
Подстока 121 файла ../Dir/file1: Thebasicideaisthatthetemplateparameterswithdefaultvaluecanbeomittedwhiletemplateinstantiation
Подстока 122 файла ../Dir/file1: Simpleexampleofdefaulttemplateparametervalueusage:template<classT,size_tN
Подстока 123 файла ../Dir/file1: 10>structmy_array{Tarr[N];};intmain
Подстока 124 файла ../Dir/file1: ){/*Defaultparameterisignored,N
Подстока 125 файла ../Dir/file1: 5*/my_array<int,5>a;}/*Printthelengthofa
Подстока 126 файла ../Dir/file1: arr:5*/std::cout<<sizeof
Подстока 127 файла ../Dir/file1: a
Подстока 128 файла ../Dir/file1: arr)/sizeof
Подстока 129 файла ../Dir/file1: int)<<std::endl;/*Lastparameterisomitted,N
Подстока 130 файла ../Dir/file1: 10*/my_array<int>b;/*Printthelengthofa
Подстока 131 файла ../Dir/file1: arr:10*/std::cout<<sizeof
Подстока 132 файла ../Dir/file1: b
Подстока 133 файла ../Dir/file1: arr)/sizeof
Подстока 134 файла ../Dir/file1: int)<<std::endl;GoalKicker
Подстока 135 файла ../Dir/file1: com–C++NotesforProfessionals424Chapter78:ExpressiontemplatesSection78
Подстока 136 файла ../Dir/file1: 1:AbasicexampleillustratingexpressiontemplatesAnexpressiontemplateisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 137 файла ../Dir/file1: It'smainpurposeistoavoidunnecessarytemporariesandoptimizeloopcalculationsusingasinglepass
Подстока 138 файла ../Dir/file1: typicallywhenperformingoperationsonnumericalaggregates)
Подстока 139 файла ../Dir/file1: ExpressiontemplateswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatoroverloadingwhenimplementingnumericalArrayorMatrixtypes
Подстока 140 файла ../Dir/file1: AnequivalentterminologyforexpressiontemplateshasbeenintroducedbyBjarneStroustrup,whocallsthem"fusedoperations"inthelatestversionofhisbook,"TheC++ProgrammingLanguage"
Подстока 141 файла ../Dir/file1: Beforeactuallydivingintoexpressiontemplates,youshouldunderstandwhyyouneedtheminthefirstplace
Подстока 142 файла ../Dir/file1: Toillustratethis,considertheverysimpleMatrixclassgivenbelow:template<typenameT,std::size_tCOL,std::size_tROW>classMatrix{public:usingvalue_type
Подстока 143 файла ../Dir/file1: T;Matrix
Подстока 144 файла ../Dir/file1: ):values
Подстока 145 файла ../Dir/file1: COL*ROW){}staticsize_tcols
Подстока 146 файла ../Dir/file1: ){returnCOL;}staticsize_trows
Подстока 147 файла ../Dir/file1: ){returnROW;}constT&operator
Подстока 148 файла ../Dir/file1: )
Подстока 149 файла ../Dir/file1: size_tx,size_ty)const{returnvalues[y*COL+x];}T&operator
Подстока 150 файла ../Dir/file1: )
Подстока 151 файла ../Dir/file1: size_tx,size_ty){returnvalues[y*COL+x];}private:std::vector<T>};values;template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>operator+
Подстока 152 файла ../Dir/file1: constMatrix<T,COL,ROW>&lhs,constMatrix<T,COL,ROW>&rhs){Matrix<T,COL,ROW>result;}for
Подстока 153 файла ../Dir/file1: size_ty
Подстока 154 файла ../Dir/file1: 0;y!
Подстока 155 файла ../Dir/file1: lhs
Подстока 156 файла ../Dir/file1: rows
Подстока 157 файла ../Dir/file1: );++y){for
Подстока 158 файла ../Dir/file1: size_tx
Подстока 159 файла ../Dir/file1: 0;x!
Подстока 160 файла ../Dir/file1: lhs
Подстока 161 файла ../Dir/file1: cols
Подстока 162 файла ../Dir/file1: );++x){result
Подстока 163 файла ../Dir/file1: x,y)
Подстока 164 файла ../Dir/file1: lhs
Подстока 165 файла ../Dir/file1: x,y)+rhs
Подстока 166 файла ../Dir/file1: x,y);}}returnresult;Giventhepreviousclassdefinition,youcannowwriteMatrixexpressionssuchas:conststd::size_tcols
Подстока 167 файла ../Dir/file1: 2000;conststd::size_trows
Подстока 168 файла ../Dir/file1: 1000;Matrix<double,cols,rows>a,b,c;//initializea,b&cfor
Подстока 169 файла ../Dir/file1: std::size_ty
Подстока 170 файла ../Dir/file1: 0;y!
Подстока 171 файла ../Dir/file1: rows;++y){for
Подстока 172 файла ../Dir/file1: std::size_tx
Подстока 173 файла ../Dir/file1: 0;x!
Подстока 174 файла ../Dir/file1: cols;++x){a
Подстока 175 файла ../Dir/file1: x,y)
Подстока 176 файла ../Dir/file1: 1
Подстока 177 файла ../Dir/file1: 0;b
Подстока 178 файла ../Dir/file1: x,y)
Подстока 179 файла ../Dir/file1: 2
Подстока 180 файла ../Dir/file1: 0;GoalKicker
Подстока 181 файла ../Dir/file1: com–C++NotesforProfessionals425}}c
Подстока 182 файла ../Dir/file1: x,y)
Подстока 183 файла ../Dir/file1: 3
Подстока 184 файла ../Dir/file1: 0;Matrix<double,cols,rows>d
Подстока 185 файла ../Dir/file1: a+b+c;//d
Подстока 186 файла ../Dir/file1: x,y)
Подстока 187 файла ../Dir/file1: 6Asillustratedabove,beingabletooverloadoperator+
Подстока 188 файла ../Dir/file1: )providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 189 файла ../Dir/file1: Unfortunately,thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 190 файла ../Dir/file1: Tounderstandwhy,youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 191 файла ../Dir/file1: a+b+c
Подстока 192 файла ../Dir/file1: Thisinfactexpandsto
Подстока 193 файла ../Dir/file1: 
Подстока 194 файла ../Dir/file1: a+b)+c)oroperator+
Подстока 195 файла ../Dir/file1: operator+
Подстока 196 файла ../Dir/file1: a,b),c)
Подстока 197 файла ../Dir/file1: Inotherwords,theloopinsideoperator+
Подстока 198 файла ../Dir/file1: )isexecutedtwice,whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 199 файла ../Dir/file1: Thisalsoresultsin2temporariesbeingcreated,whichfurtherdegradesperformance
Подстока 200 файла ../Dir/file1: Inessence,byaddingtheflexibilitytouseanotationclosetoitsmathematicalcounterpart,youhavealsomadetheMatrixclasshighlyinefficient
Подстока 201 файла ../Dir/file1: Forexample,withoutoperatoroverloading,youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>add3
Подстока 202 файла ../Dir/file1: constMatrix<T,COL,ROW>&a,constMatrix<T,COL,ROW>&b,constMatrix<T,COL,ROW>&c){Matrix<T,COL,ROW>result;for
Подстока 203 файла ../Dir/file1: size_ty
Подстока 204 файла ../Dir/file1: 0;y!
Подстока 205 файла ../Dir/file1: ROW;++y){for
Подстока 206 файла ../Dir/file1: size_tx
Подстока 207 файла ../Dir/file1: 0;x!
Подстока 208 файла ../Dir/file1: COL;++x){result
Подстока 209 файла ../Dir/file1: x,y)
Подстока 210 файла ../Dir/file1: a
Подстока 211 файла ../Dir/file1: x,y)+b
Подстока 212 файла ../Dir/file1: x,y)+c
Подстока 213 файла ../Dir/file1: x,y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass
Подстока 214 файла ../Dir/file1: youwouldhavetoconsidermethodssuchasMatrix::add2
Подстока 215 файла ../Dir/file1: ),Matrix::AddMultiply
Подстока 216 файла ../Dir/file1: )andsoon)
Подстока 217 файла ../Dir/file1: InsteadletustakeastepbackandseehowwecanadaptoperatoroverloadingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 218 файла ../Dir/file1: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 219 файла ../Dir/file1: Inotherwords,whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 220 файла ../Dir/file1: Thisisthecoreideabehindexpressiontemplates:insteadofhavingoperator+
Подстока 221 файла ../Dir/file1: )evaluateimmediatelytheresultofaddingtwoMatrixinstances,itwillreturnan"expressiontemplate"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 222 файла ../Dir/file1: Forexample,hereisapossibleimplementationforanexpressiontemplatecorrespondingtothesummationof2types:template<typenameLHS,typenameRHS>classMatrixSum{public:usingvalue_type
Подстока 223 файла ../Dir/file1: typenameLHS::value_type;GoalKicker
Подстока 224 файла ../Dir/file1: com–C++NotesforProfessionals426MatrixSum
Подстока 225 файла ../Dir/file1: constLHS&lhs,constRHS&rhs):rhs
Подстока 226 файла ../Dir/file1: rhs),lhs
Подстока 227 файла ../Dir/file1: lhs){}value_typeoperator
Подстока 228 файла ../Dir/file1: )
Подстока 229 файла ../Dir/file1: intx,inty)const{returnlhs
Подстока 230 файла ../Dir/file1: x,y)+rhs
Подстока 231 файла ../Dir/file1: x,y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+
Подстока 232 файла ../Dir/file1: )template<typenameLHS,typenameRHS>MatrixSum<LHS,RHS>operator+
Подстока 233 файла ../Dir/file1: constLHS&lhs,constLHS&rhs){returnMatrixSum<LHS,RHS>
Подстока 234 файла ../Dir/file1: lhs,rhs);}Asyoucansee,operator+
Подстока 235 файла ../Dir/file1: )nolongerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances
Подстока 236 файла ../Dir/file1: whichwouldbeanotherMatrixinstance),butinsteadanexpressiontemplaterepresentingtheadditionoperation
Подстока 237 файла ../Dir/file1: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 238 файла ../Dir/file1: Itmerelyholdsreferencestoitsoperands
Подстока 239 файла ../Dir/file1: Infact,nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontemplateasfollows:MatrixSum<Matrix<double>,Matrix<double>>SumAB
Подстока 240 файла ../Dir/file1: a,b);Youcanhoweveratalaterstage,whenyouactuallyneedtheresultofthesummation,evaluatetheexpressiond
Подстока 241 файла ../Dir/file1: a+basfollows:for
Подстока 242 файла ../Dir/file1: std::size_ty
Подстока 243 файла ../Dir/file1: 0;y!
Подстока 244 файла ../Dir/file1: a
Подстока 245 файла ../Dir/file1: rows
Подстока 246 файла ../Dir/file1: );++y){for
Подстока 247 файла ../Dir/file1: std::size_tx
Подстока 248 файла ../Dir/file1: 0;x!
Подстока 249 файла ../Dir/file1: a
Подстока 250 файла ../Dir/file1: cols
Подстока 251 файла ../Dir/file1: );++x){d
Подстока 252 файла ../Dir/file1: x,y)
Подстока 253 файла ../Dir/file1: SumAB
Подстока 254 файла ../Dir/file1: x,y);}}Asyoucansee,anotherbenefitofusinganexpressiontemplate,isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: T
Подстока 2 файла ../Dir/file1: intT
Подстока 3 файла ../Dir/file1: int,U
Подстока 4 файла ../Dir/file1: doubleFunctiontemplatesmayonlybefullyspecialized:template<typenameT,typenameU>voidfoo
Подстока 5 файла ../Dir/file1: Tt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}
Подстока 6 файла ../Dir/file1: 
Подстока 7 файла ../Dir/file1: OK
Подстока 8 файла ../Dir/file1: template<>voidfoo<int,int>
Подстока 9 файла ../Dir/file1: inta1,inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke_foo
Подстока 10 файла ../Dir/file1: ){foo
Подстока 11 файла ../Dir/file1: 1,2
Подстока 12 файла ../Dir/file1: 1);
Подстока 13 файла ../Dir/file1: 
Подстока 14 файла ../Dir/file1: Prints"Generalcase:12
Подстока 15 файла ../Dir/file1: 1"foo
Подстока 16 файла ../Dir/file1: 1,2);
Подстока 17 файла ../Dir/file1: 
Подстока 18 файла ../Dir/file1: Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file1: com–C++NotesforProfessionals419
Подстока 20 файла ../Dir/file1: 
Подстока 21 файла ../Dir/file1: Compilationerror:partialfunctionspecializationisnotallowed
Подстока 22 файла ../Dir/file1: template<typenameU>voidfoo<std::string,U>
Подстока 23 файла ../Dir/file1: std::stringt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 24 файла ../Dir/file1: 6:TemplateSpecializationYoucandefineimplementationforspecificinstantiationsofatemplateclass
Подстока 25 файла ../Dir/file1: method
Подстока 26 файла ../Dir/file1: Forexampleifyouhave:template<typenameT>Tsqrt
Подстока 27 файла ../Dir/file1: Tt){
Подстока 28 файла ../Dir/file1: *Somegenericimplementation*
Подстока 29 файла ../Dir/file1: }Youcanthenwrite:template<>intsqrt<int>
Подстока 30 файла ../Dir/file1: inti){
Подстока 31 файла ../Dir/file1: *Highlyoptimizedintegerimplementation*
Подстока 32 файла ../Dir/file1: }Thenauserthatwritessqrt
Подстока 33 файла ../Dir/file1: 4
Подстока 34 файла ../Dir/file1: 0)willgetthegenericimplementationwhereassqrt
Подстока 35 файла ../Dir/file1: 4)willgetthespecializedimplementation
Подстока 36 файла ../Dir/file1: Section77
Подстока 37 файла ../Dir/file1: 7:AliastemplateVersion≥C++11Basicexample:template<typenameT>usingpointer
Подстока 38 файла ../Dir/file1: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 39 файла ../Dir/file1: Forexample:pointer<int>p
Подстока 40 файла ../Dir/file1: newint;
Подстока 41 файла ../Dir/file1: 
Подстока 42 файла ../Dir/file1: equivalentto:int*p
Подстока 43 файла ../Dir/file1: newint;Aliastemplatescannotbespecialized
Подстока 44 файла ../Dir/file1: However,thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:template<typenameT>structnonconst_pointer_helper{typedefT*type;};template<typenameT>structnonconst_pointer_helper<Tconst>{typedefT*type;};template<typenameT>usingnonconst_pointer
Подстока 45 файла ../Dir/file1: nonconst_pointer_helper<T>::type;Section77
Подстока 46 файла ../Dir/file1: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass,function,orvariablefromatemplate,withoutusingitjustyet
Подстока 47 файла ../Dir/file1: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 48 файла ../Dir/file1: Thiscanbeusedtoavoiddefiningatemplateinaheaderfile,ifitwillonlybeinstantiatedwithafinitesetofarguments
Подстока 49 файла ../Dir/file1: Forexample:
Подстока 50 файла ../Dir/file1: 
Подстока 51 файла ../Dir/file1: print_string
Подстока 52 файла ../Dir/file1: htemplate<classT>voidprint_string
Подстока 53 файла ../Dir/file1: constT*str);GoalKicker
Подстока 54 файла ../Dir/file1: com–C++NotesforProfessionals420
Подстока 55 файла ../Dir/file1: 
Подстока 56 файла ../Dir/file1: print_string
Подстока 57 файла ../Dir/file1: cpp#include"print_string
Подстока 58 файла ../Dir/file1: h"templatevoidprint_string
Подстока 59 файла ../Dir/file1: constchar*);templatevoidprint_string
Подстока 60 файла ../Dir/file1: constwchar_t*);Becauseprint_string<char>andprint_string<wchar_t>areexplicitlyinstantiatedinprint_string
Подстока 61 файла ../Dir/file1: cpp,thelinkerwillbeabletofindthemeventhoughtheprint_stringtemplateisnotdefinedintheheader
Подстока 62 файла ../Dir/file1: Iftheseexplicitinstantiationdeclarationswerenotpresent,alinkererrorwouldlikelyoccur
Подстока 63 файла ../Dir/file1: SeeWhycantemplatesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword,itbecomesanexplicitinstantiationdeclarationinstead
Подстока 64 файла ../Dir/file1: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 65 файла ../Dir/file1: Instead,areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 66 файла ../Dir/file1: foo
Подстока 67 файла ../Dir/file1: h#ifndefFOO_H#defineFOO_Htemplate<classT>voidfoo
Подстока 68 файла ../Dir/file1: Tx){
Подстока 69 файла ../Dir/file1: 
Подстока 70 файла ../Dir/file1: complicatedimplementation}#endiffoo
Подстока 71 файла ../Dir/file1: cpp#include"foo
Подстока 72 файла ../Dir/file1: h"
Подстока 73 файла ../Dir/file1: 
Подстока 74 файла ../Dir/file1: explicitinstantiationdefinitionsforcommoncasestemplatevoidfoo
Подстока 75 файла ../Dir/file1: int);templatevoidfoo
Подстока 76 файла ../Dir/file1: double);main
Подстока 77 файла ../Dir/file1: cpp#include"foo
Подстока 78 файла ../Dir/file1: h"
Подстока 79 файла ../Dir/file1: 
Подстока 80 файла ../Dir/file1: wealreadyknowfoo
Подстока 81 файла ../Dir/file1: cpphasexplicitinstantiationdefinitionsfortheseexterntemplatevoidfoo
Подстока 82 файла ../Dir/file1: double);intmain
Подстока 83 файла ../Dir/file1: ){foo
Подстока 84 файла ../Dir/file1: 42);
Подстока 85 файла ../Dir/file1: 
Подстока 86 файла ../Dir/file1: instantiatesfoo<int>here;
Подстока 87 файла ../Dir/file1: 
Подстока 88 файла ../Dir/file1: wastefulsincefoo
Подстока 89 файла ../Dir/file1: cppprovidesanexplicitinstantiationalready!foo
Подстока 90 файла ../Dir/file1: 3
Подстока 91 файла ../Dir/file1: 14);
Подстока 92 файла ../Dir/file1: 
Подстока 93 файла ../Dir/file1: doesnotinstantiatefoo<double>here;
Подстока 94 файла ../Dir/file1: 
Подстока 95 файла ../Dir/file1: usesinstantiationoffoo<double>infoo
Подстока 96 файла ../Dir/file1: cppinstead}Section77
Подстока 97 файла ../Dir/file1: 9:Non-typetemplateparameterApartfromtypesasatemplateparameterweareallowedtodeclarevaluesofconstantexpressionsmeetingoneofthefollowingcriteria:integralorenumerationtype,pointertoobjectorpointertofunction,lvaluereferencetoobjectorlvaluereferencetofunction,pointertomember,std::nullptr_t
Подстока 98 файла ../Dir/file1: GoalKicker
Подстока 99 файла ../Dir/file1: com–C++NotesforProfessionals421Likealltemplateparameters,non-typetemplateparameterscanbeexplicitlyspecified,defaulted,orderivedimplicitlyviaTemplateArgumentDeduction
Подстока 100 файла ../Dir/file1: Exampleofnon-typetemplateparameterusage:#include<iostream>template<typenameT,std::size_tsize>std::size_tsize_of
Подстока 101 файла ../Dir/file1: T
Подстока 102 файла ../Dir/file1: &anArray)[size])
Подстока 103 файла ../Dir/file1: 
Подстока 104 файла ../Dir/file1: Passarraybyreference
Подстока 105 файла ../Dir/file1: Requires
Подстока 106 файла ../Dir/file1: {
Подстока 107 файла ../Dir/file1: 
Подстока 108 файла ../Dir/file1: anexactsize
Подстока 109 файла ../Dir/file1: Weallowallsizesreturnsize;
Подстока 110 файла ../Dir/file1: 
Подстока 111 файла ../Dir/file1: byusingatemplate"size"
Подстока 112 файла ../Dir/file1: }intmain
Подстока 113 файла ../Dir/file1: ){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size_of
Подстока 114 файла ../Dir/file1: anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 115 файла ../Dir/file1: {1,2,3,4,5,6,7,8,9};std::cout<<"anArrayOfData:"<<size_of
Подстока 116 файла ../Dir/file1: anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetemplateparameters:#include<array>intmain
Подстока 117 файла ../Dir/file1: ){std::array<int,5>foo;
Подстока 118 файла ../Dir/file1: 
Подстока 119 файла ../Dir/file1: intisatypeparameter,5isnon-type}Non-typetemplateparametersareoneofthewaystoachievetemplaterecurrenceandenablestodoMetaprogramming
Подстока 120 файла ../Dir/file1: Section77
Подстока 121 файла ../Dir/file1: 10:Declaringnon-typetemplateargumentswithautoPriortoC++17,whenwritingatemplatenon-typeparameter,youhadtospecifyitstypefirst
Подстока 122 файла ../Dir/file1: Soacommonpatternbecamewritingsomethinglike:template<classT,TN>structintegral_constant{usingtype
Подстока 123 файла ../Dir/file1: T;staticconstexprTvalue
Подстока 124 файла ../Dir/file1: N;};usingfive
Подстока 125 файла ../Dir/file1: integral_constant<int,5>;Butforcomplicatedexpressions,usingsomethinglikethisinvolveshavingtowritedecltype
Подстока 126 файла ../Dir/file1: expr),exprwheninstantiatingtemplates
Подстока 127 файла ../Dir/file1: Thesolutionistosimplifythisidiomandsimplyallowauto:Version≥C++17template<autoN>structintegral_constant{usingtype
Подстока 128 файла ../Dir/file1: decltype
Подстока 129 файла ../Dir/file1: N);staticconstexprtypevalue
Подстока 130 файла ../Dir/file1: N;};GoalKicker
Подстока 131 файла ../Dir/file1: com–C++NotesforProfessionals422usingfive
Подстока 132 файла ../Dir/file1: integral_constant<5>;Emptycustomdeleterforunique_ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique_ptr
Подстока 133 файла ../Dir/file1: DifferentCAPIdeletershavedifferentreturntypes,butwedon'tcare-wejustwantsomethingtoworkforanyfunction:template<autoDeleteFn>structFunctionDeleter{template<classT>voidoperator
Подстока 134 файла ../Dir/file1: )
Подстока 135 файла ../Dir/file1: T*ptr)const{DeleteFn
Подстока 136 файла ../Dir/file1: ptr);}};template<T,autoDeleteFn>usingunique_ptr_deleter
Подстока 137 файла ../Dir/file1: std::unique_ptr<T,FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatemplatenon-typeparameter,regardlessofreturntype,andgetano-sizeoverheadunique_ptroutofit:unique_ptr_deleter<std::FILE,std::fclose>p;Section77
Подстока 138 файла ../Dir/file1: 11:TemplatetemplateparametersSometimeswewouldliketopassintothetemplateatemplatetypewithoutfixingitsvalues
Подстока 139 файла ../Dir/file1: Thisiswhattemplatetemplateparametersarecreatedfor
Подстока 140 файла ../Dir/file1: Verysimpletemplatetemplateparameterexamples:template<classT>structTag1{};template<classT>structTag2{};template<template<class>classTag>structIntTag{typedefTag<int>type;};intmain
Подстока 141 файла ../Dir/file1: ){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>template<classT,template<class
Подстока 142 файла ../Dir/file1: 
Подстока 143 файла ../Dir/file1: 
Подстока 144 файла ../Dir/file1: >classC,classU>C<T>cast_all
Подстока 145 файла ../Dir/file1: constC<U>&c){C<T>result
Подстока 146 файла ../Dir/file1: c
Подстока 147 файла ../Dir/file1: begin
Подстока 148 файла ../Dir/file1: ),c
Подстока 149 файла ../Dir/file1: end
Подстока 150 файла ../Dir/file1: ));returnresult;}intmain
Подстока 151 файла ../Dir/file1: ){std::vector<float>vf
Подстока 152 файла ../Dir/file1: {1
Подстока 153 файла ../Dir/file1: 2,2
Подстока 154 файла ../Dir/file1: 6,3
Подстока 155 файла ../Dir/file1: 7};autovi
Подстока 156 файла ../Dir/file1: cast_all<int>
Подстока 157 файла ../Dir/file1: vf);for
Подстока 158 файла ../Dir/file1: auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 159 файла ../Dir/file1: com–C++NotesforProfessionals423}Section77
Подстока 160 файла ../Dir/file1: 12:DefaulttemplateparametervalueJustlikeincaseofthefunctionarguments,templateparameterscanhavetheirdefaultvalues
Подстока 161 файла ../Dir/file1: Alltemplateparameterswithadefaultvaluehavetobedeclaredattheendofthetemplateparameterlist
Подстока 162 файла ../Dir/file1: Thebasicideaisthatthetemplateparameterswithdefaultvaluecanbeomittedwhiletemplateinstantiation
Подстока 163 файла ../Dir/file1: Simpleexampleofdefaulttemplateparametervalueusage:template<classT,size_tN
Подстока 164 файла ../Dir/file1: 10>structmy_array{Tarr[N];};intmain
Подстока 165 файла ../Dir/file1: ){
Подстока 166 файла ../Dir/file1: *Defaultparameterisignored,N
Подстока 167 файла ../Dir/file1: 5*
Подстока 168 файла ../Dir/file1: my_array<int,5>a;}
Подстока 169 файла ../Dir/file1: *Printthelengthofa
Подстока 170 файла ../Dir/file1: arr:5*
Подстока 171 файла ../Dir/file1: std::cout<<sizeof
Подстока 172 файла ../Dir/file1: a
Подстока 173 файла ../Dir/file1: arr)
Подстока 174 файла ../Dir/file1: sizeof
Подстока 175 файла ../Dir/file1: int)<<std::endl;
Подстока 176 файла ../Dir/file1: *Lastparameterisomitted,N
Подстока 177 файла ../Dir/file1: 10*
Подстока 178 файла ../Dir/file1: my_array<int>b;
Подстока 179 файла ../Dir/file1: *Printthelengthofa
Подстока 180 файла ../Dir/file1: arr:10*
Подстока 181 файла ../Dir/file1: std::cout<<sizeof
Подстока 182 файла ../Dir/file1: b
Подстока 183 файла ../Dir/file1: arr)
Подстока 184 файла ../Dir/file1: sizeof
Подстока 185 файла ../Dir/file1: int)<<std::endl;GoalKicker
Подстока 186 файла ../Dir/file1: com–C++NotesforProfessionals424Chapter78:ExpressiontemplatesSection78
Подстока 187 файла ../Dir/file1: 1:AbasicexampleillustratingexpressiontemplatesAnexpressiontemplateisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 188 файла ../Dir/file1: It'smainpurposeistoavoidunnecessarytemporariesandoptimizeloopcalculationsusingasinglepass
Подстока 189 файла ../Dir/file1: typicallywhenperformingoperationsonnumericalaggregates)
Подстока 190 файла ../Dir/file1: ExpressiontemplateswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatoroverloadingwhenimplementingnumericalArrayorMatrixtypes
Подстока 191 файла ../Dir/file1: AnequivalentterminologyforexpressiontemplateshasbeenintroducedbyBjarneStroustrup,whocallsthem"fusedoperations"inthelatestversionofhisbook,"TheC++ProgrammingLanguage"
Подстока 192 файла ../Dir/file1: Beforeactuallydivingintoexpressiontemplates,youshouldunderstandwhyyouneedtheminthefirstplace
Подстока 193 файла ../Dir/file1: Toillustratethis,considertheverysimpleMatrixclassgivenbelow:template<typenameT,std::size_tCOL,std::size_tROW>classMatrix{public:usingvalue_type
Подстока 194 файла ../Dir/file1: T;Matrix
Подстока 195 файла ../Dir/file1: ):values
Подстока 196 файла ../Dir/file1: COL*ROW){}staticsize_tcols
Подстока 197 файла ../Dir/file1: ){returnCOL;}staticsize_trows
Подстока 198 файла ../Dir/file1: ){returnROW;}constT&operator
Подстока 199 файла ../Dir/file1: )
Подстока 200 файла ../Dir/file1: size_tx,size_ty)const{returnvalues[y*COL+x];}T&operator
Подстока 201 файла ../Dir/file1: )
Подстока 202 файла ../Dir/file1: size_tx,size_ty){returnvalues[y*COL+x];}private:std::vector<T>};values;template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>operator+
Подстока 203 файла ../Dir/file1: constMatrix<T,COL,ROW>&lhs,constMatrix<T,COL,ROW>&rhs){Matrix<T,COL,ROW>result;}for
Подстока 204 файла ../Dir/file1: size_ty
Подстока 205 файла ../Dir/file1: 0;y!
Подстока 206 файла ../Dir/file1: lhs
Подстока 207 файла ../Dir/file1: rows
Подстока 208 файла ../Dir/file1: );++y){for
Подстока 209 файла ../Dir/file1: size_tx
Подстока 210 файла ../Dir/file1: 0;x!
Подстока 211 файла ../Dir/file1: lhs
Подстока 212 файла ../Dir/file1: cols
Подстока 213 файла ../Dir/file1: );++x){result
Подстока 214 файла ../Dir/file1: x,y)
Подстока 215 файла ../Dir/file1: lhs
Подстока 216 файла ../Dir/file1: x,y)+rhs
Подстока 217 файла ../Dir/file1: x,y);}}returnresult;Giventhepreviousclassdefinition,youcannowwriteMatrixexpressionssuchas:conststd::size_tcols
Подстока 218 файла ../Dir/file1: 2000;conststd::size_trows
Подстока 219 файла ../Dir/file1: 1000;Matrix<double,cols,rows>a,b,c;
Подстока 220 файла ../Dir/file1: 
Подстока 221 файла ../Dir/file1: initializea,b&cfor
Подстока 222 файла ../Dir/file1: std::size_ty
Подстока 223 файла ../Dir/file1: 0;y!
Подстока 224 файла ../Dir/file1: rows;++y){for
Подстока 225 файла ../Dir/file1: std::size_tx
Подстока 226 файла ../Dir/file1: 0;x!
Подстока 227 файла ../Dir/file1: cols;++x){a
Подстока 228 файла ../Dir/file1: x,y)
Подстока 229 файла ../Dir/file1: 1
Подстока 230 файла ../Dir/file1: 0;b
Подстока 231 файла ../Dir/file1: x,y)
Подстока 232 файла ../Dir/file1: 2
Подстока 233 файла ../Dir/file1: 0;GoalKicker
Подстока 234 файла ../Dir/file1: com–C++NotesforProfessionals425}}c
Подстока 235 файла ../Dir/file1: x,y)
Подстока 236 файла ../Dir/file1: 3
Подстока 237 файла ../Dir/file1: 0;Matrix<double,cols,rows>d
Подстока 238 файла ../Dir/file1: a+b+c;
Подстока 239 файла ../Dir/file1: 
Подстока 240 файла ../Dir/file1: d
Подстока 241 файла ../Dir/file1: x,y)
Подстока 242 файла ../Dir/file1: 6Asillustratedabove,beingabletooverloadoperator+
Подстока 243 файла ../Dir/file1: )providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 244 файла ../Dir/file1: Unfortunately,thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 245 файла ../Dir/file1: Tounderstandwhy,youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 246 файла ../Dir/file1: a+b+c
Подстока 247 файла ../Dir/file1: Thisinfactexpandsto
Подстока 248 файла ../Dir/file1: 
Подстока 249 файла ../Dir/file1: a+b)+c)oroperator+
Подстока 250 файла ../Dir/file1: operator+
Подстока 251 файла ../Dir/file1: a,b),c)
Подстока 252 файла ../Dir/file1: Inotherwords,theloopinsideoperator+
Подстока 253 файла ../Dir/file1: )isexecutedtwice,whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 254 файла ../Dir/file1: Thisalsoresultsin2temporariesbeingcreated,whichfurtherdegradesperformance
Подстока 255 файла ../Dir/file1: Inessence,byaddingtheflexibilitytouseanotationclosetoitsmathematicalcounterpart,youhavealsomadetheMatrixclasshighlyinefficient
Подстока 256 файла ../Dir/file1: Forexample,withoutoperatoroverloading,youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>add3
Подстока 257 файла ../Dir/file1: constMatrix<T,COL,ROW>&a,constMatrix<T,COL,ROW>&b,constMatrix<T,COL,ROW>&c){Matrix<T,COL,ROW>result;for
Подстока 258 файла ../Dir/file1: size_ty
Подстока 259 файла ../Dir/file1: 0;y!
Подстока 260 файла ../Dir/file1: ROW;++y){for
Подстока 261 файла ../Dir/file1: size_tx
Подстока 262 файла ../Dir/file1: 0;x!
Подстока 263 файла ../Dir/file1: COL;++x){result
Подстока 264 файла ../Dir/file1: x,y)
Подстока 265 файла ../Dir/file1: a
Подстока 266 файла ../Dir/file1: x,y)+b
Подстока 267 файла ../Dir/file1: x,y)+c
Подстока 268 файла ../Dir/file1: x,y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass
Подстока 269 файла ../Dir/file1: youwouldhavetoconsidermethodssuchasMatrix::add2
Подстока 270 файла ../Dir/file1: ),Matrix::AddMultiply
Подстока 271 файла ../Dir/file1: )andsoon)
Подстока 272 файла ../Dir/file1: InsteadletustakeastepbackandseehowwecanadaptoperatoroverloadingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 273 файла ../Dir/file1: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 274 файла ../Dir/file1: Inotherwords,whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 275 файла ../Dir/file1: Thisisthecoreideabehindexpressiontemplates:insteadofhavingoperator+
Подстока 276 файла ../Dir/file1: )evaluateimmediatelytheresultofaddingtwoMatrixinstances,itwillreturnan"expressiontemplate"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 277 файла ../Dir/file1: Forexample,hereisapossibleimplementationforanexpressiontemplatecorrespondingtothesummationof2types:template<typenameLHS,typenameRHS>classMatrixSum{public:usingvalue_type
Подстока 278 файла ../Dir/file1: typenameLHS::value_type;GoalKicker
Подстока 279 файла ../Dir/file1: com–C++NotesforProfessionals426MatrixSum
Подстока 280 файла ../Dir/file1: constLHS&lhs,constRHS&rhs):rhs
Подстока 281 файла ../Dir/file1: rhs),lhs
Подстока 282 файла ../Dir/file1: lhs){}value_typeoperator
Подстока 283 файла ../Dir/file1: )
Подстока 284 файла ../Dir/file1: intx,inty)const{returnlhs
Подстока 285 файла ../Dir/file1: x,y)+rhs
Подстока 286 файла ../Dir/file1: x,y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+
Подстока 287 файла ../Dir/file1: )template<typenameLHS,typenameRHS>MatrixSum<LHS,RHS>operator+
Подстока 288 файла ../Dir/file1: constLHS&lhs,constLHS&rhs){returnMatrixSum<LHS,RHS>
Подстока 289 файла ../Dir/file1: lhs,rhs);}Asyoucansee,operator+
Подстока 290 файла ../Dir/file1: )nolongerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances
Подстока 291 файла ../Dir/file1: whichwouldbeanotherMatrixinstance),butinsteadanexpressiontemplaterepresentingtheadditionoperation
Подстока 292 файла ../Dir/file1: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 293 файла ../Dir/file1: Itmerelyholdsreferencestoitsoperands
Подстока 294 файла ../Dir/file1: Infact,nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontemplateasfollows:MatrixSum<Matrix<double>,Matrix<double>>SumAB
Подстока 295 файла ../Dir/file1: a,b);Youcanhoweveratalaterstage,whenyouactuallyneedtheresultofthesummation,evaluatetheexpressiond
Подстока 296 файла ../Dir/file1: a+basfollows:for
Подстока 297 файла ../Dir/file1: std::size_ty
Подстока 298 файла ../Dir/file1: 0;y!
Подстока 299 файла ../Dir/file1: a
Подстока 300 файла ../Dir/file1: rows
Подстока 301 файла ../Dir/file1: );++y){for
Подстока 302 файла ../Dir/file1: std::size_tx
Подстока 303 файла ../Dir/file1: 0;x!
Подстока 304 файла ../Dir/file1: a
Подстока 305 файла ../Dir/file1: cols
Подстока 306 файла ../Dir/file1: );++x){d
Подстока 307 файла ../Dir/file1: x,y)
Подстока 308 файла ../Dir/file1: SumAB
Подстока 309 файла ../Dir/file1: x,y);}}Asyoucansee,anotherbenefitofusinganexpressiontemplate,isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

[Имя файла ../Dir/file2 ]:
Подстока 1 файла ../Dir/file2: cbydebc
Подстока 2 файла ../Dir/file2: e
Подстока 3 файла ../Dir/file2: cwljjowkdokoe**kd;kqw;dkw
Подстока 4 файла ../Dir/file2: o;k;kw;kcwk@@c;ek;k;ckep;kcpp3kpp
Подстока 5 файла ../Dir/file2: 3p333pp3p3p3p3p3pp3p3pp3

[Имя файла ../Dir/file4 ]:
Подстока 1 файла ../Dir/file4: T
Подстока 2 файла ../Dir/file4: intT
Подстока 3 файла ../Dir/file4: int
Подстока 4 файла ../Dir/file4: U
Подстока 5 файла ../Dir/file4: doubleFunctiontem
Подстока 6 файла ../Dir/file4: tesmayonlybefullyspecialized:tem
Подстока 7 файла ../Dir/file4: te<typenameT
Подстока 8 файла ../Dir/file4: typenameU>voidfoo(Tt
Подстока 9 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}//OK
Подстока 10 файла ../Dir/file4: tem
Подстока 11 файла ../Dir/file4: te<>voidfoo<int
Подстока 12 файла ../Dir/file4: int>(inta1
Подстока 13 файла ../Dir/file4: inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke
Подстока 14 файла ../Dir/file4: foo(){foo(1
Подстока 15 файла ../Dir/file4: 2
Подстока 16 файла ../Dir/file4: 1);//Prints"Generalcase:12
Подстока 17 файла ../Dir/file4: 1"foo(1
Подстока 18 файла ../Dir/file4: 2);//Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file4: com–C++NotesforProfessionals419//Compilationerror:partialfunctionspecializationisnotal
Подстока 20 файла ../Dir/file4: wed
Подстока 21 файла ../Dir/file4: tem
Подстока 22 файла ../Dir/file4: te<typenameU>voidfoo<std::string
Подстока 23 файла ../Dir/file4: U>(std::stringt
Подстока 24 файла ../Dir/file4: Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 25 файла ../Dir/file4: 6:Tem
Подстока 26 файла ../Dir/file4: teSpecializationYoucandefineimplementationforspecificinstantiationsofatem
Подстока 27 файла ../Dir/file4: teclass/method
Подстока 28 файла ../Dir/file4: Forexampleifyouhave:tem
Подстока 29 файла ../Dir/file4: te<typenameT>Tsqrt(Tt){/*Somegenericimplementation*/}Youcanthenwrite:tem
Подстока 30 файла ../Dir/file4: te<>intsqrt<int>(inti){/*Highlyoptimizedintegerimplementation*/}Thenauserthatwritessqrt(4
Подстока 31 файла ../Dir/file4: 0)willgetthegenericimplementationwhereassqrt(4)willgetthespecializedimplementation
Подстока 32 файла ../Dir/file4: Section77
Подстока 33 файла ../Dir/file4: 7:Aliastem
Подстока 34 файла ../Dir/file4: teVersion≥C++11Basicexample:tem
Подстока 35 файла ../Dir/file4: te<typenameT>usingpointer
Подстока 36 файла ../Dir/file4: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 37 файла ../Dir/file4: Forexample:pointer<int>p
Подстока 38 файла ../Dir/file4: newint;//equivalentto:int*p
Подстока 39 файла ../Dir/file4: newint;Aliastem
Подстока 40 файла ../Dir/file4: tescannotbespecialized
Подстока 41 файла ../Dir/file4: However
Подстока 42 файла ../Dir/file4: thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:tem
Подстока 43 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 44 файла ../Dir/file4: pointer
Подстока 45 файла ../Dir/file4: helper{typedefT*type;};tem
Подстока 46 файла ../Dir/file4: te<typenameT>structnonconst
Подстока 47 файла ../Dir/file4: pointer
Подстока 48 файла ../Dir/file4: helper<Tconst>{typedefT*type;};tem
Подстока 49 файла ../Dir/file4: te<typenameT>usingnonconst
Подстока 50 файла ../Dir/file4: pointer
Подстока 51 файла ../Dir/file4: nonconst
Подстока 52 файла ../Dir/file4: pointer
Подстока 53 файла ../Dir/file4: helper<T>::type;Section77
Подстока 54 файла ../Dir/file4: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass
Подстока 55 файла ../Dir/file4: function
Подстока 56 файла ../Dir/file4: orvariablefromatem
Подстока 57 файла ../Dir/file4: te
Подстока 58 файла ../Dir/file4: withoutusingitjustyet
Подстока 59 файла ../Dir/file4: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 60 файла ../Dir/file4: Thiscanbeusedtoavoiddefiningatem
Подстока 61 файла ../Dir/file4: teinaheaderfile
Подстока 62 файла ../Dir/file4: ifitwil
Подстока 63 файла ../Dir/file4: nlybeinstantiatedwithafinitesetofarguments
Подстока 64 файла ../Dir/file4: Forexample://print
Подстока 65 файла ../Dir/file4: string
Подстока 66 файла ../Dir/file4: htem
Подстока 67 файла ../Dir/file4: te<classT>voidprint
Подстока 68 файла ../Dir/file4: string(constT*str);GoalKicker
Подстока 69 файла ../Dir/file4: com–C++NotesforProfessionals420//print
Подстока 70 файла ../Dir/file4: string
Подстока 71 файла ../Dir/file4: cpp#include"print
Подстока 72 файла ../Dir/file4: string
Подстока 73 файла ../Dir/file4: h"tem
Подстока 74 файла ../Dir/file4: tevoidprint
Подстока 75 файла ../Dir/file4: string(constchar*);tem
Подстока 76 файла ../Dir/file4: tevoidprint
Подстока 77 файла ../Dir/file4: string(constwchar
Подстока 78 файла ../Dir/file4: t*);Becauseprint
Подстока 79 файла ../Dir/file4: string<char>andprint
Подстока 80 файла ../Dir/file4: string<wchar
Подстока 81 файла ../Dir/file4: t>areexplicitlyinstantiatedinprint
Подстока 82 файла ../Dir/file4: string
Подстока 83 файла ../Dir/file4: cpp
Подстока 84 файла ../Dir/file4: thelinkerwillbeabletofindthemeventhoughtheprint
Подстока 85 файла ../Dir/file4: stringtem
Подстока 86 файла ../Dir/file4: teisnotdefinedintheheader
Подстока 87 файла ../Dir/file4: Iftheseexplicitinstantiationdeclarationswerenotpresent
Подстока 88 файла ../Dir/file4: alinkererrorwouldlikelyoccur
Подстока 89 файла ../Dir/file4: SeeWhycantem
Подстока 90 файла ../Dir/file4: tesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword
Подстока 91 файла ../Dir/file4: itbecomesanexplicitinstantiationdeclarationinstead
Подстока 92 файла ../Dir/file4: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 93 файла ../Dir/file4: Instead
Подстока 94 файла ../Dir/file4: areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 95 файла ../Dir/file4: foo
Подстока 96 файла ../Dir/file4: h#ifndefFOO
Подстока 97 файла ../Dir/file4: H#defineFOO
Подстока 98 файла ../Dir/file4: Htem
Подстока 99 файла ../Dir/file4: te<classT>voidfoo(Tx){//complicatedimplementation}#endiffoo
Подстока 100 файла ../Dir/file4: cpp#include"foo
Подстока 101 файла ../Dir/file4: h"//explicitinstantiationdefinitionsforcommoncasestem
Подстока 102 файла ../Dir/file4: tevoidfoo(int);tem
Подстока 103 файла ../Dir/file4: tevoidfoo(double);main
Подстока 104 файла ../Dir/file4: cpp#include"foo
Подстока 105 файла ../Dir/file4: h"//wealreadyknowfoo
Подстока 106 файла ../Dir/file4: cpphasexplicitinstantiationdefinitionsfortheseexterntem
Подстока 107 файла ../Dir/file4: tevoidfoo(double);intmain(){foo(42);//instantiatesfoo<int>here;//wastefulsincefoo
Подстока 108 файла ../Dir/file4: cppprovidesanexplicitinstantiationalready!foo(3
Подстока 109 файла ../Dir/file4: 14);//doesnotinstantiatefoo<double>here;//usesinstantiationoffoo<double>infoo
Подстока 110 файла ../Dir/file4: cppinstead}Section77
Подстока 111 файла ../Dir/file4: 9:Non-typetem
Подстока 112 файла ../Dir/file4: teparameterApartfromtypesasatem
Подстока 113 файла ../Dir/file4: teparameterweareal
Подстока 114 файла ../Dir/file4: wedtodeclarevaluesofconstantexpressionsmeetingoneofthefol
Подстока 115 файла ../Dir/file4: wingcriteria:integra
Подстока 116 файла ../Dir/file4: renumerationtype
Подстока 117 файла ../Dir/file4: pointertoobjectorpointertofunction
Подстока 118 файла ../Dir/file4: lvaluereferencetoobjectorlvaluereferencetofunction
Подстока 119 файла ../Dir/file4: pointertomember
Подстока 120 файла ../Dir/file4: std::nullptr
Подстока 121 файла ../Dir/file4: t
Подстока 122 файла ../Dir/file4: GoalKicker
Подстока 123 файла ../Dir/file4: com–C++NotesforProfessionals421Likealltem
Подстока 124 файла ../Dir/file4: teparameters
Подстока 125 файла ../Dir/file4: non-typetem
Подстока 126 файла ../Dir/file4: teparameterscanbeexplicitlyspecified
Подстока 127 файла ../Dir/file4: defaulted
Подстока 128 файла ../Dir/file4: orderivedimplicitlyviaTem
Подстока 129 файла ../Dir/file4: teArgumentDeduction
Подстока 130 файла ../Dir/file4: Exampleofnon-typetem
Подстока 131 файла ../Dir/file4: teparameterusage:#include<iostream>tem
Подстока 132 файла ../Dir/file4: te<typenameT
Подстока 133 файла ../Dir/file4: std::size
Подстока 134 файла ../Dir/file4: tsize>std::size
Подстока 135 файла ../Dir/file4: tsize
Подстока 136 файла ../Dir/file4: of(T(&anArray)[size])//Passarraybyreference
Подстока 137 файла ../Dir/file4: Requires
Подстока 138 файла ../Dir/file4: {//anexactsize
Подстока 139 файла ../Dir/file4: Weal
Подстока 140 файла ../Dir/file4: wallsizesreturnsize;//byusingatem
Подстока 141 файла ../Dir/file4: te"size"
Подстока 142 файла ../Dir/file4: }intmain(){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size
Подстока 143 файла ../Dir/file4: of(anArrayOfChar)<<"\n";}intanArrayOfData[]
Подстока 144 файла ../Dir/file4: {1
Подстока 145 файла ../Dir/file4: 2
Подстока 146 файла ../Dir/file4: 3
Подстока 147 файла ../Dir/file4: 4
Подстока 148 файла ../Dir/file4: 5
Подстока 149 файла ../Dir/file4: 6
Подстока 150 файла ../Dir/file4: 7
Подстока 151 файла ../Dir/file4: 8
Подстока 152 файла ../Dir/file4: 9};std::cout<<"anArrayOfData:"<<size
Подстока 153 файла ../Dir/file4: of(anArrayOfData)<<"\n";Exampleofexplicitlyspecifyingbothtypeandnon-typetem
Подстока 154 файла ../Dir/file4: teparameters:#include<array>intmain(){std::array<int
Подстока 155 файла ../Dir/file4: 5>foo;//intisatypeparameter
Подстока 156 файла ../Dir/file4: 5isnon-type}Non-typetem
Подстока 157 файла ../Dir/file4: teparametersareoneofthewaystoachievetem
Подстока 158 файла ../Dir/file4: terecurrenceandenablestodoMetaprogramming
Подстока 159 файла ../Dir/file4: Section77
Подстока 160 файла ../Dir/file4: 10:Declaringnon-typetem
Подстока 161 файла ../Dir/file4: teargumentswithautoPriortoC++17
Подстока 162 файла ../Dir/file4: whenwritingatem
Подстока 163 файла ../Dir/file4: tenon-typeparameter
Подстока 164 файла ../Dir/file4: youhadtospecifyitstypefirst
Подстока 165 файла ../Dir/file4: Soacommonpatternbecamewritingsomethinglike:tem
Подстока 166 файла ../Dir/file4: te<classT
Подстока 167 файла ../Dir/file4: TN>structintegral
Подстока 168 файла ../Dir/file4: constant{usingtype
Подстока 169 файла ../Dir/file4: T;staticconstexprTvalue
Подстока 170 файла ../Dir/file4: N;};usingfive
Подстока 171 файла ../Dir/file4: integral
Подстока 172 файла ../Dir/file4: constant<int
Подстока 173 файла ../Dir/file4: 5>;Butforcomplicatedexpressions
Подстока 174 файла ../Dir/file4: usingsomethinglikethisinvolveshavingtowritedecltype(expr)
Подстока 175 файла ../Dir/file4: exprwheninstantiatingtem
Подстока 176 файла ../Dir/file4: tes
Подстока 177 файла ../Dir/file4: Thesolutionistosimplifythisidiomandsimplyal
Подстока 178 файла ../Dir/file4: wauto:Version≥C++17tem
Подстока 179 файла ../Dir/file4: te<autoN>structintegral
Подстока 180 файла ../Dir/file4: constant{usingtype
Подстока 181 файла ../Dir/file4: decltype(N);staticconstexprtypevalue
Подстока 182 файла ../Dir/file4: N;};GoalKicker
Подстока 183 файла ../Dir/file4: com–C++NotesforProfessionals422usingfive
Подстока 184 файла ../Dir/file4: integral
Подстока 185 файла ../Dir/file4: constant<5>;Emptycustomdeleterforunique
Подстока 186 файла ../Dir/file4: ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique
Подстока 187 файла ../Dir/file4: ptr
Подстока 188 файла ../Dir/file4: DifferentCAPIdeletershavedifferentreturntypes
Подстока 189 файла ../Dir/file4: butwedon'tcare-wejustwantsomethingtoworkforanyfunction:tem
Подстока 190 файла ../Dir/file4: te<autoDeleteFn>structFunctionDeleter{tem
Подстока 191 файла ../Dir/file4: te<classT>voidoperator()(T*ptr)const{DeleteFn(ptr);}};tem
Подстока 192 файла ../Dir/file4: te<T
Подстока 193 файла ../Dir/file4: autoDeleteFn>usingunique
Подстока 194 файла ../Dir/file4: ptr
Подстока 195 файла ../Dir/file4: deleter
Подстока 196 файла ../Dir/file4: std::unique
Подстока 197 файла ../Dir/file4: ptr<T
Подстока 198 файла ../Dir/file4: FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatem
Подстока 199 файла ../Dir/file4: tenon-typeparameter
Подстока 200 файла ../Dir/file4: regardlessofreturntype
Подстока 201 файла ../Dir/file4: andgetano-sizeoverheadunique
Подстока 202 файла ../Dir/file4: ptroutofit:unique
Подстока 203 файла ../Dir/file4: ptr
Подстока 204 файла ../Dir/file4: deleter<std::FILE
Подстока 205 файла ../Dir/file4: std::fc
Подстока 206 файла ../Dir/file4: se>p;Section77
Подстока 207 файла ../Dir/file4: 11:Tem
Подстока 208 файла ../Dir/file4: tetem
Подстока 209 файла ../Dir/file4: teparametersSometimeswewouldliketopassintothetem
Подстока 210 файла ../Dir/file4: teatem
Подстока 211 файла ../Dir/file4: tetypewithoutfixingitsvalues
Подстока 212 файла ../Dir/file4: Thisiswhattem
Подстока 213 файла ../Dir/file4: tetem
Подстока 214 файла ../Dir/file4: teparametersarecreatedfor
Подстока 215 файла ../Dir/file4: Verysimpletem
Подстока 216 файла ../Dir/file4: tetem
Подстока 217 файла ../Dir/file4: teparameterexamples:tem
Подстока 218 файла ../Dir/file4: te<classT>structTag1{};tem
Подстока 219 файла ../Dir/file4: te<classT>structTag2{};tem
Подстока 220 файла ../Dir/file4: te<tem
Подстока 221 файла ../Dir/file4: te<class>classTag>structIntTag{typedefTag<int>type;};intmain(){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>tem
Подстока 222 файла ../Dir/file4: te<classT
Подстока 223 файла ../Dir/file4: tem
Подстока 224 файла ../Dir/file4: te<class
Подстока 225 файла ../Dir/file4: 
Подстока 226 файла ../Dir/file4: 
Подстока 227 файла ../Dir/file4: >classC
Подстока 228 файла ../Dir/file4: classU>C<T>cast
Подстока 229 файла ../Dir/file4: all(constC<U>&c){C<T>result(c
Подстока 230 файла ../Dir/file4: begin()
Подстока 231 файла ../Dir/file4: c
Подстока 232 файла ../Dir/file4: end());returnresult;}intmain(){std::vector<f
Подстока 233 файла ../Dir/file4: at>vf
Подстока 234 файла ../Dir/file4: {1
Подстока 235 файла ../Dir/file4: 2
Подстока 236 файла ../Dir/file4: 2
Подстока 237 файла ../Dir/file4: 6
Подстока 238 файла ../Dir/file4: 3
Подстока 239 файла ../Dir/file4: 7};autovi
Подстока 240 файла ../Dir/file4: cast
Подстока 241 файла ../Dir/file4: all<int>(vf);for(auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 242 файла ../Dir/file4: com–C++NotesforProfessionals423}Section77
Подстока 243 файла ../Dir/file4: 12:Defaulttem
Подстока 244 файла ../Dir/file4: teparametervalueJustlikeincaseofthefunctionarguments
Подстока 245 файла ../Dir/file4: tem
Подстока 246 файла ../Dir/file4: teparameterscanhavetheirdefaultvalues
Подстока 247 файла ../Dir/file4: Alltem
Подстока 248 файла ../Dir/file4: teparameterswithadefaultvaluehavetobedeclaredattheendofthetem
Подстока 249 файла ../Dir/file4: teparameterlist
Подстока 250 файла ../Dir/file4: Thebasicideaisthatthetem
Подстока 251 файла ../Dir/file4: teparameterswithdefaultvaluecanbeomittedwhiletem
Подстока 252 файла ../Dir/file4: teinstantiation
Подстока 253 файла ../Dir/file4: Simpleexampleofdefaulttem
Подстока 254 файла ../Dir/file4: teparametervalueusage:tem
Подстока 255 файла ../Dir/file4: te<classT
Подстока 256 файла ../Dir/file4: size
Подстока 257 файла ../Dir/file4: tN
Подстока 258 файла ../Dir/file4: 10>structmy
Подстока 259 файла ../Dir/file4: array{Tarr[N];};intmain(){/*Defaultparameterisignored
Подстока 260 файла ../Dir/file4: N
Подстока 261 файла ../Dir/file4: 5*/my
Подстока 262 файла ../Dir/file4: array<int
Подстока 263 файла ../Dir/file4: 5>a;}/*Printthelengthofa
Подстока 264 файла ../Dir/file4: arr:5*/std::cout<<sizeof(a
Подстока 265 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;/*Lastparameterisomitted
Подстока 266 файла ../Dir/file4: N
Подстока 267 файла ../Dir/file4: 10*/my
Подстока 268 файла ../Dir/file4: array<int>b;/*Printthelengthofa
Подстока 269 файла ../Dir/file4: arr:10*/std::cout<<sizeof(b
Подстока 270 файла ../Dir/file4: arr)/sizeof(int)<<std::endl;GoalKicker
Подстока 271 файла ../Dir/file4: com–C++NotesforProfessionals424Chapter78:Expressiontem
Подстока 272 файла ../Dir/file4: tesSection78
Подстока 273 файла ../Dir/file4: 1:Abasicexampleillustratingexpressiontem
Подстока 274 файла ../Dir/file4: tesAnexpressiontem
Подстока 275 файла ../Dir/file4: teisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 276 файла ../Dir/file4: It'smainpurposeistoavoidunnecessarytemporariesandoptimize
Подстока 277 файла ../Dir/file4: opcalculationsusingasinglepass(typicallywhenperformingoperationsonnumericalaggregates)
Подстока 278 файла ../Dir/file4: Expressiontem
Подстока 279 файла ../Dir/file4: teswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatorover
Подстока 280 файла ../Dir/file4: adingwhenimplementingnumericalArrayorMatrixtypes
Подстока 281 файла ../Dir/file4: Anequivalenttermino
Подстока 282 файла ../Dir/file4: gyforexpressiontem
Подстока 283 файла ../Dir/file4: teshasbeenintroducedbyBjarneStroustrup
Подстока 284 файла ../Dir/file4: whocallsthem"fusedoperations"inthelatestversionofhisbook
Подстока 285 файла ../Dir/file4: "TheC++ProgrammingLanguage"
Подстока 286 файла ../Dir/file4: Beforeactuallydivingintoexpressiontem
Подстока 287 файла ../Dir/file4: tes
Подстока 288 файла ../Dir/file4: youshouldunderstandwhyyouneedtheminthefirst
Подстока 289 файла ../Dir/file4: ce
Подстока 290 файла ../Dir/file4: Toillustratethis
Подстока 291 файла ../Dir/file4: considertheverysimpleMatrixclassgivenbe
Подстока 292 файла ../Dir/file4: w:tem
Подстока 293 файла ../Dir/file4: te<typenameT
Подстока 294 файла ../Dir/file4: std::size
Подстока 295 файла ../Dir/file4: tCOL
Подстока 296 файла ../Dir/file4: std::size
Подстока 297 файла ../Dir/file4: tROW>classMatrix{public:usingvalue
Подстока 298 файла ../Dir/file4: type
Подстока 299 файла ../Dir/file4: T;Matrix():values(COL*ROW){}staticsize
Подстока 300 файла ../Dir/file4: tcols(){returnCOL;}staticsize
Подстока 301 файла ../Dir/file4: trows(){returnROW;}constT&operator()(size
Подстока 302 файла ../Dir/file4: tx
Подстока 303 файла ../Dir/file4: size
Подстока 304 файла ../Dir/file4: ty)const{returnvalues[y*COL+x];}T&operator()(size
Подстока 305 файла ../Dir/file4: tx
Подстока 306 файла ../Dir/file4: size
Подстока 307 файла ../Dir/file4: ty){returnvalues[y*COL+x];}private:std::vector<T>};values;tem
Подстока 308 файла ../Dir/file4: te<typenameT
Подстока 309 файла ../Dir/file4: std::size
Подстока 310 файла ../Dir/file4: tCOL
Подстока 311 файла ../Dir/file4: std::size
Подстока 312 файла ../Dir/file4: tROW>Matrix<T
Подстока 313 файла ../Dir/file4: COL
Подстока 314 файла ../Dir/file4: ROW>operator+(constMatrix<T
Подстока 315 файла ../Dir/file4: COL
Подстока 316 файла ../Dir/file4: ROW>&lhs
Подстока 317 файла ../Dir/file4: constMatrix<T
Подстока 318 файла ../Dir/file4: COL
Подстока 319 файла ../Dir/file4: ROW>&rhs){Matrix<T
Подстока 320 файла ../Dir/file4: COL
Подстока 321 файла ../Dir/file4: ROW>result;}for(size
Подстока 322 файла ../Dir/file4: ty
Подстока 323 файла ../Dir/file4: 0;y!
Подстока 324 файла ../Dir/file4: lhs
Подстока 325 файла ../Dir/file4: rows();++y){for(size
Подстока 326 файла ../Dir/file4: tx
Подстока 327 файла ../Dir/file4: 0;x!
Подстока 328 файла ../Dir/file4: lhs
Подстока 329 файла ../Dir/file4: cols();++x){result(x
Подстока 330 файла ../Dir/file4: y)
Подстока 331 файла ../Dir/file4: lhs(x
Подстока 332 файла ../Dir/file4: y)+rhs(x
Подстока 333 файла ../Dir/file4: y);}}returnresult;Giventhepreviousclassdefinition
Подстока 334 файла ../Dir/file4: youcannowwriteMatrixexpressionssuchas:conststd::size
Подстока 335 файла ../Dir/file4: tcols
Подстока 336 файла ../Dir/file4: 2000;conststd::size
Подстока 337 файла ../Dir/file4: trows
Подстока 338 файла ../Dir/file4: 1000;Matrix<double
Подстока 339 файла ../Dir/file4: cols
Подстока 340 файла ../Dir/file4: rows>a
Подстока 341 файла ../Dir/file4: b
Подстока 342 файла ../Dir/file4: c;//initializea
Подстока 343 файла ../Dir/file4: b&cfor(std::size
Подстока 344 файла ../Dir/file4: ty
Подстока 345 файла ../Dir/file4: 0;y!
Подстока 346 файла ../Dir/file4: rows;++y){for(std::size
Подстока 347 файла ../Dir/file4: tx
Подстока 348 файла ../Dir/file4: 0;x!
Подстока 349 файла ../Dir/file4: cols;++x){a(x
Подстока 350 файла ../Dir/file4: y)
Подстока 351 файла ../Dir/file4: 1
Подстока 352 файла ../Dir/file4: 0;b(x
Подстока 353 файла ../Dir/file4: y)
Подстока 354 файла ../Dir/file4: 2
Подстока 355 файла ../Dir/file4: 0;GoalKicker
Подстока 356 файла ../Dir/file4: com–C++NotesforProfessionals425}}c(x
Подстока 357 файла ../Dir/file4: y)
Подстока 358 файла ../Dir/file4: 3
Подстока 359 файла ../Dir/file4: 0;Matrix<double
Подстока 360 файла ../Dir/file4: cols
Подстока 361 файла ../Dir/file4: rows>d
Подстока 362 файла ../Dir/file4: a+b+c;//d(x
Подстока 363 файла ../Dir/file4: y)
Подстока 364 файла ../Dir/file4: 6Asillustratedabove
Подстока 365 файла ../Dir/file4: beingabletoover
Подстока 366 файла ../Dir/file4: adoperator+()providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 367 файла ../Dir/file4: Unfortunately
Подстока 368 файла ../Dir/file4: thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 369 файла ../Dir/file4: Tounderstandwhy
Подстока 370 файла ../Dir/file4: youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 371 файла ../Dir/file4: a+b+c
Подстока 372 файла ../Dir/file4: Thisinfactexpandsto((a+b)+c)oroperator+(operator+(a
Подстока 373 файла ../Dir/file4: b)
Подстока 374 файла ../Dir/file4: c)
Подстока 375 файла ../Dir/file4: Inotherwords
Подстока 376 файла ../Dir/file4: the
Подстока 377 файла ../Dir/file4: opinsideoperator+()isexecutedtwice
Подстока 378 файла ../Dir/file4: whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 379 файла ../Dir/file4: Thisalsoresultsin2temporariesbeingcreated
Подстока 380 файла ../Dir/file4: whichfurtherdegradesperformance
Подстока 381 файла ../Dir/file4: Inessence
Подстока 382 файла ../Dir/file4: byaddingtheflexibilitytouseanotationc
Подстока 383 файла ../Dir/file4: setoitsmathematicalcounterpart
Подстока 384 файла ../Dir/file4: youhavealsomadetheMatrixclasshighlyinefficient
Подстока 385 файла ../Dir/file4: Forexample
Подстока 386 файла ../Dir/file4: withoutoperatorover
Подстока 387 файла ../Dir/file4: ading
Подстока 388 файла ../Dir/file4: youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:tem
Подстока 389 файла ../Dir/file4: te<typenameT
Подстока 390 файла ../Dir/file4: std::size
Подстока 391 файла ../Dir/file4: tCOL
Подстока 392 файла ../Dir/file4: std::size
Подстока 393 файла ../Dir/file4: tROW>Matrix<T
Подстока 394 файла ../Dir/file4: COL
Подстока 395 файла ../Dir/file4: ROW>add3(constMatrix<T
Подстока 396 файла ../Dir/file4: COL
Подстока 397 файла ../Dir/file4: ROW>&a
Подстока 398 файла ../Dir/file4: constMatrix<T
Подстока 399 файла ../Dir/file4: COL
Подстока 400 файла ../Dir/file4: ROW>&b
Подстока 401 файла ../Dir/file4: constMatrix<T
Подстока 402 файла ../Dir/file4: COL
Подстока 403 файла ../Dir/file4: ROW>&c){Matrix<T
Подстока 404 файла ../Dir/file4: COL
Подстока 405 файла ../Dir/file4: ROW>result;for(size
Подстока 406 файла ../Dir/file4: ty
Подстока 407 файла ../Dir/file4: 0;y!
Подстока 408 файла ../Dir/file4: ROW;++y){for(size
Подстока 409 файла ../Dir/file4: tx
Подстока 410 файла ../Dir/file4: 0;x!
Подстока 411 файла ../Dir/file4: COL;++x){result(x
Подстока 412 файла ../Dir/file4: y)
Подстока 413 файла ../Dir/file4: a(x
Подстока 414 файла ../Dir/file4: y)+b(x
Подстока 415 файла ../Dir/file4: y)+c(x
Подстока 416 файла ../Dir/file4: y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass(youwouldhavetoconsidermethodssuchasMatrix::add2()
Подстока 417 файла ../Dir/file4: Matrix::AddMultiply()andsoon)
Подстока 418 файла ../Dir/file4: Insteadletustakeastepbackandseehowwecanadaptoperatorover
Подстока 419 файла ../Dir/file4: adingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 420 файла ../Dir/file4: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 421 файла ../Dir/file4: Inotherwords
Подстока 422 файла ../Dir/file4: whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 423 файла ../Dir/file4: Thisisthecoreideabehindexpressiontem
Подстока 424 файла ../Dir/file4: tes:insteadofhavingoperator+()evaluateimmediatelytheresultofaddingtwoMatrixinstances
Подстока 425 файла ../Dir/file4: itwillreturnan"expressiontem
Подстока 426 файла ../Dir/file4: te"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 427 файла ../Dir/file4: Forexample
Подстока 428 файла ../Dir/file4: hereisapossibleimplementationforanexpressiontem
Подстока 429 файла ../Dir/file4: tecorrespondingtothesummationof2types:tem
Подстока 430 файла ../Dir/file4: te<typenameLHS
Подстока 431 файла ../Dir/file4: typenameRHS>classMatrixSum{public:usingvalue
Подстока 432 файла ../Dir/file4: type
Подстока 433 файла ../Dir/file4: typenameLHS::value
Подстока 434 файла ../Dir/file4: type;GoalKicker
Подстока 435 файла ../Dir/file4: com–C++NotesforProfessionals426MatrixSum(constLHS&lhs
Подстока 436 файла ../Dir/file4: constRHS&rhs):rhs(rhs)
Подстока 437 файла ../Dir/file4: lhs(lhs){}value
Подстока 438 файла ../Dir/file4: typeoperator()(intx
Подстока 439 файла ../Dir/file4: inty)const{returnlhs(x
Подстока 440 файла ../Dir/file4: y)+rhs(x
Подстока 441 файла ../Dir/file4: y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+()tem
Подстока 442 файла ../Dir/file4: te<typenameLHS
Подстока 443 файла ../Dir/file4: typenameRHS>MatrixSum<LHS
Подстока 444 файла ../Dir/file4: RHS>operator+(constLHS&lhs
Подстока 445 файла ../Dir/file4: constLHS&rhs){returnMatrixSum<LHS
Подстока 446 файла ../Dir/file4: RHS>(lhs
Подстока 447 файла ../Dir/file4: rhs);}Asyoucansee
Подстока 448 файла ../Dir/file4: operator+()no
Подстока 449 файла ../Dir/file4: ngerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances(whichwouldbeanotherMatrixinstance)
Подстока 450 файла ../Dir/file4: butinsteadanexpressiontem
Подстока 451 файла ../Dir/file4: terepresentingtheadditionoperation
Подстока 452 файла ../Dir/file4: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 453 файла ../Dir/file4: Itmerelyholdsreferencestoitsoperands
Подстока 454 файла ../Dir/file4: Infact
Подстока 455 файла ../Dir/file4: nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontem
Подстока 456 файла ../Dir/file4: teasfol
Подстока 457 файла ../Dir/file4: ws:MatrixSum<Matrix<double>
Подстока 458 файла ../Dir/file4: Matrix<double>>SumAB(a
Подстока 459 файла ../Dir/file4: b);Youcanhoweveratalaterstage
Подстока 460 файла ../Dir/file4: whenyouactuallyneedtheresultofthesummation
Подстока 461 файла ../Dir/file4: evaluatetheexpressiond
Подстока 462 файла ../Dir/file4: a+basfol
Подстока 463 файла ../Dir/file4: ws:for(std::size
Подстока 464 файла ../Dir/file4: ty
Подстока 465 файла ../Dir/file4: 0;y!
Подстока 466 файла ../Dir/file4: a
Подстока 467 файла ../Dir/file4: rows();++y){for(std::size
Подстока 468 файла ../Dir/file4: tx
Подстока 469 файла ../Dir/file4: 0;x!
Подстока 470 файла ../Dir/file4: a
Подстока 471 файла ../Dir/file4: cols();++x){d(x
Подстока 472 файла ../Dir/file4: y)
Подстока 473 файла ../Dir/file4: SumAB(x
Подстока 474 файла ../Dir/file4: y);}}Asyoucansee
Подстока 475 файла ../Dir/file4: anotherbenefitofusinganexpressiontem
Подстока 476 файла ../Dir/file4: te
Подстока 477 файла ../Dir/file4: isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file1 ]:
Подстока 1 файла ../Dir/file1: T
Подстока 2 файла ../Dir/file1: intT
Подстока 3 файла ../Dir/file1: int,U
Подстока 4 файла ../Dir/file1: doubleFunctiontemplatesmayonlybefullyspecialized:template<typenameT,typenameU>voidfoo
Подстока 5 файла ../Dir/file1: Tt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}
Подстока 6 файла ../Dir/file1: 
Подстока 7 файла ../Dir/file1: OK
Подстока 8 файла ../Dir/file1: template<>voidfoo<int,int>
Подстока 9 файла ../Dir/file1: inta1,inta2){std::cout<<"Twoints:"<<a1<<""<<a2<<std::endl;}voidinvoke_foo
Подстока 10 файла ../Dir/file1: ){foo
Подстока 11 файла ../Dir/file1: 1,2
Подстока 12 файла ../Dir/file1: 1);
Подстока 13 файла ../Dir/file1: 
Подстока 14 файла ../Dir/file1: Prints"Generalcase:12
Подстока 15 файла ../Dir/file1: 1"foo
Подстока 16 файла ../Dir/file1: 1,2);
Подстока 17 файла ../Dir/file1: 
Подстока 18 файла ../Dir/file1: Prints"Twoints:12"}GoalKicker
Подстока 19 файла ../Dir/file1: com–C++NotesforProfessionals419
Подстока 20 файла ../Dir/file1: 
Подстока 21 файла ../Dir/file1: Compilationerror:partialfunctionspecializationisnotallowed
Подстока 22 файла ../Dir/file1: template<typenameU>voidfoo<std::string,U>
Подстока 23 файла ../Dir/file1: std::stringt,Uu){std::cout<<"Generalcase:"<<t<<""<<u<<std::endl;}Section77
Подстока 24 файла ../Dir/file1: 6:TemplateSpecializationYoucandefineimplementationforspecificinstantiationsofatemplateclass
Подстока 25 файла ../Dir/file1: method
Подстока 26 файла ../Dir/file1: Forexampleifyouhave:template<typenameT>Tsqrt
Подстока 27 файла ../Dir/file1: Tt){
Подстока 28 файла ../Dir/file1: *Somegenericimplementation*
Подстока 29 файла ../Dir/file1: }Youcanthenwrite:template<>intsqrt<int>
Подстока 30 файла ../Dir/file1: inti){
Подстока 31 файла ../Dir/file1: *Highlyoptimizedintegerimplementation*
Подстока 32 файла ../Dir/file1: }Thenauserthatwritessqrt
Подстока 33 файла ../Dir/file1: 4
Подстока 34 файла ../Dir/file1: 0)willgetthegenericimplementationwhereassqrt
Подстока 35 файла ../Dir/file1: 4)willgetthespecializedimplementation
Подстока 36 файла ../Dir/file1: Section77
Подстока 37 файла ../Dir/file1: 7:AliastemplateVersion≥C++11Basicexample:template<typenameT>usingpointer
Подстока 38 файла ../Dir/file1: T*;Thisdefinitionmakespointer<T>analiasofT*
Подстока 39 файла ../Dir/file1: Forexample:pointer<int>p
Подстока 40 файла ../Dir/file1: newint;
Подстока 41 файла ../Dir/file1: 
Подстока 42 файла ../Dir/file1: equivalentto:int*p
Подстока 43 файла ../Dir/file1: newint;Aliastemplatescannotbespecialized
Подстока 44 файла ../Dir/file1: However,thatfunctionalitycanbeobtainedindirectlybyhavingthemrefertoanestedtypeinastruct:template<typenameT>structnonconst_pointer_helper{typedefT*type;};template<typenameT>structnonconst_pointer_helper<Tconst>{typedefT*type;};template<typenameT>usingnonconst_pointer
Подстока 45 файла ../Dir/file1: nonconst_pointer_helper<T>::type;Section77
Подстока 46 файла ../Dir/file1: 8:ExplicitinstantiationAnexplicitinstantiationdefinitioncreatesanddeclaresaconcreteclass,function,orvariablefromatemplate,withoutusingitjustyet
Подстока 47 файла ../Dir/file1: Anexplicitinstantiationcanbereferencedfromothertranslationunits
Подстока 48 файла ../Dir/file1: Thiscanbeusedtoavoiddefiningatemplateinaheaderfile,ifitwillonlybeinstantiatedwithafinitesetofarguments
Подстока 49 файла ../Dir/file1: Forexample:
Подстока 50 файла ../Dir/file1: 
Подстока 51 файла ../Dir/file1: print_string
Подстока 52 файла ../Dir/file1: htemplate<classT>voidprint_string
Подстока 53 файла ../Dir/file1: constT*str);GoalKicker
Подстока 54 файла ../Dir/file1: com–C++NotesforProfessionals420
Подстока 55 файла ../Dir/file1: 
Подстока 56 файла ../Dir/file1: print_string
Подстока 57 файла ../Dir/file1: cpp#include"print_string
Подстока 58 файла ../Dir/file1: h"templatevoidprint_string
Подстока 59 файла ../Dir/file1: constchar*);templatevoidprint_string
Подстока 60 файла ../Dir/file1: constwchar_t*);Becauseprint_string<char>andprint_string<wchar_t>areexplicitlyinstantiatedinprint_string
Подстока 61 файла ../Dir/file1: cpp,thelinkerwillbeabletofindthemeventhoughtheprint_stringtemplateisnotdefinedintheheader
Подстока 62 файла ../Dir/file1: Iftheseexplicitinstantiationdeclarationswerenotpresent,alinkererrorwouldlikelyoccur
Подстока 63 файла ../Dir/file1: SeeWhycantemplatesonlybeimplementedintheheaderfile?Version≥C++11Ifanexplicitinstantiationdefinitionisprecededbytheexternkeyword,itbecomesanexplicitinstantiationdeclarationinstead
Подстока 64 файла ../Dir/file1: Thepresenceofanexplicitinstantiationdeclarationforagivenspecializationpreventstheimplicitinstantiationofthegivenspecializationwithinthecurrenttranslationunit
Подстока 65 файла ../Dir/file1: Instead,areferencetothatspecializationthatwouldotherwisecauseanimplicitinstantiationcanrefertoanexplicitinstantiationdefinitioninthesameoranotherTU
Подстока 66 файла ../Dir/file1: foo
Подстока 67 файла ../Dir/file1: h#ifndefFOO_H#defineFOO_Htemplate<classT>voidfoo
Подстока 68 файла ../Dir/file1: Tx){
Подстока 69 файла ../Dir/file1: 
Подстока 70 файла ../Dir/file1: complicatedimplementation}#endiffoo
Подстока 71 файла ../Dir/file1: cpp#include"foo
Подстока 72 файла ../Dir/file1: h"
Подстока 73 файла ../Dir/file1: 
Подстока 74 файла ../Dir/file1: explicitinstantiationdefinitionsforcommoncasestemplatevoidfoo
Подстока 75 файла ../Dir/file1: int);templatevoidfoo
Подстока 76 файла ../Dir/file1: double);main
Подстока 77 файла ../Dir/file1: cpp#include"foo
Подстока 78 файла ../Dir/file1: h"
Подстока 79 файла ../Dir/file1: 
Подстока 80 файла ../Dir/file1: wealreadyknowfoo
Подстока 81 файла ../Dir/file1: cpphasexplicitinstantiationdefinitionsfortheseexterntemplatevoidfoo
Подстока 82 файла ../Dir/file1: double);intmain
Подстока 83 файла ../Dir/file1: ){foo
Подстока 84 файла ../Dir/file1: 42);
Подстока 85 файла ../Dir/file1: 
Подстока 86 файла ../Dir/file1: instantiatesfoo<int>here;
Подстока 87 файла ../Dir/file1: 
Подстока 88 файла ../Dir/file1: wastefulsincefoo
Подстока 89 файла ../Dir/file1: cppprovidesanexplicitinstantiationalready!foo
Подстока 90 файла ../Dir/file1: 3
Подстока 91 файла ../Dir/file1: 14);
Подстока 92 файла ../Dir/file1: 
Подстока 93 файла ../Dir/file1: doesnotinstantiatefoo<double>here;
Подстока 94 файла ../Dir/file1: 
Подстока 95 файла ../Dir/file1: usesinstantiationoffoo<double>infoo
Подстока 96 файла ../Dir/file1: cppinstead}Section77
Подстока 97 файла ../Dir/file1: 9:Non-typetemplateparameterApartfromtypesasatemplateparameterweareallowedtodeclarevaluesofconstantexpressionsmeetingoneofthefollowingcriteria:integralorenumerationtype,pointertoobjectorpointertofunction,lvaluereferencetoobjectorlvaluereferencetofunction,pointertomember,std::nullptr_t
Подстока 98 файла ../Dir/file1: GoalKicker
Подстока 99 файла ../Dir/file1: com–C++NotesforProfessionals421Likealltemplateparameters,non-typetemplateparameterscanbeexplicitlyspecified,defaulted,orderivedimplicitlyviaTemplateArgumentDeduction
Подстока 100 файла ../Dir/file1: Exampleofnon-typetemplateparameterusage:#include<iostream>template<typenameT,std::size_tsize>std::size_tsize_of
Подстока 101 файла ../Dir/file1: T
Подстока 102 файла ../Dir/file1: &anArray)[size])
Подстока 103 файла ../Dir/file1: 
Подстока 104 файла ../Dir/file1: Passarraybyreference
Подстока 105 файла ../Dir/file1: Requires
Подстока 106 файла ../Dir/file1: {
Подстока 107 файла ../Dir/file1: 
Подстока 108 файла ../Dir/file1: anexactsize
Подстока 109 файла ../Dir/file1: Weallowallsizesreturnsize;
Подстока 110 файла ../Dir/file1: 
Подстока 111 файла ../Dir/file1: byusingatemplate"size"
Подстока 112 файла ../Dir/file1: }intmain
Подстока 113 файла ../Dir/file1: ){charanArrayOfChar[15];std::cout<<"anArrayOfChar:"<<size_of
Подстока 114 файла ../Dir/file1: anArrayOfChar)<<"
Подстока 115 файла ../Dir/file1: n";}intanArrayOfData[]
Подстока 116 файла ../Dir/file1: {1,2,3,4,5,6,7,8,9};std::cout<<"anArrayOfData:"<<size_of
Подстока 117 файла ../Dir/file1: anArrayOfData)<<"
Подстока 118 файла ../Dir/file1: n";Exampleofexplicitlyspecifyingbothtypeandnon-typetemplateparameters:#include<array>intmain
Подстока 119 файла ../Dir/file1: ){std::array<int,5>foo;
Подстока 120 файла ../Dir/file1: 
Подстока 121 файла ../Dir/file1: intisatypeparameter,5isnon-type}Non-typetemplateparametersareoneofthewaystoachievetemplaterecurrenceandenablestodoMetaprogramming
Подстока 122 файла ../Dir/file1: Section77
Подстока 123 файла ../Dir/file1: 10:Declaringnon-typetemplateargumentswithautoPriortoC++17,whenwritingatemplatenon-typeparameter,youhadtospecifyitstypefirst
Подстока 124 файла ../Dir/file1: Soacommonpatternbecamewritingsomethinglike:template<classT,TN>structintegral_constant{usingtype
Подстока 125 файла ../Dir/file1: T;staticconstexprTvalue
Подстока 126 файла ../Dir/file1: N;};usingfive
Подстока 127 файла ../Dir/file1: integral_constant<int,5>;Butforcomplicatedexpressions,usingsomethinglikethisinvolveshavingtowritedecltype
Подстока 128 файла ../Dir/file1: expr),exprwheninstantiatingtemplates
Подстока 129 файла ../Dir/file1: Thesolutionistosimplifythisidiomandsimplyallowauto:Version≥C++17template<autoN>structintegral_constant{usingtype
Подстока 130 файла ../Dir/file1: decltype
Подстока 131 файла ../Dir/file1: N);staticconstexprtypevalue
Подстока 132 файла ../Dir/file1: N;};GoalKicker
Подстока 133 файла ../Dir/file1: com–C++NotesforProfessionals422usingfive
Подстока 134 файла ../Dir/file1: integral_constant<5>;Emptycustomdeleterforunique_ptrAnicemotivatingexamplecancomefromtryingtocombinetheemptybaseoptimizationwithacustomdeleterforunique_ptr
Подстока 135 файла ../Dir/file1: DifferentCAPIdeletershavedifferentreturntypes,butwedon'tcare-wejustwantsomethingtoworkforanyfunction:template<autoDeleteFn>structFunctionDeleter{template<classT>voidoperator
Подстока 136 файла ../Dir/file1: )
Подстока 137 файла ../Dir/file1: T*ptr)const{DeleteFn
Подстока 138 файла ../Dir/file1: ptr);}};template<T,autoDeleteFn>usingunique_ptr_deleter
Подстока 139 файла ../Dir/file1: std::unique_ptr<T,FunctionDeleter<DeleteFn>>;AndnowyoucansimplyuseanyfunctionpointerthatcantakeanargumentoftypeTasatemplatenon-typeparameter,regardlessofreturntype,andgetano-sizeoverheadunique_ptroutofit:unique_ptr_deleter<std::FILE,std::fclose>p;Section77
Подстока 140 файла ../Dir/file1: 11:TemplatetemplateparametersSometimeswewouldliketopassintothetemplateatemplatetypewithoutfixingitsvalues
Подстока 141 файла ../Dir/file1: Thisiswhattemplatetemplateparametersarecreatedfor
Подстока 142 файла ../Dir/file1: Verysimpletemplatetemplateparameterexamples:template<classT>structTag1{};template<classT>structTag2{};template<template<class>classTag>structIntTag{typedefTag<int>type;};intmain
Подстока 143 файла ../Dir/file1: ){IntTag<Tag1>::typet;}Version≥C++11#include<vector>#include<iostream>template<classT,template<class
Подстока 144 файла ../Dir/file1: 
Подстока 145 файла ../Dir/file1: 
Подстока 146 файла ../Dir/file1: >classC,classU>C<T>cast_all
Подстока 147 файла ../Dir/file1: constC<U>&c){C<T>result
Подстока 148 файла ../Dir/file1: c
Подстока 149 файла ../Dir/file1: begin
Подстока 150 файла ../Dir/file1: ),c
Подстока 151 файла ../Dir/file1: end
Подстока 152 файла ../Dir/file1: ));returnresult;}intmain
Подстока 153 файла ../Dir/file1: ){std::vector<float>vf
Подстока 154 файла ../Dir/file1: {1
Подстока 155 файла ../Dir/file1: 2,2
Подстока 156 файла ../Dir/file1: 6,3
Подстока 157 файла ../Dir/file1: 7};autovi
Подстока 158 файла ../Dir/file1: cast_all<int>
Подстока 159 файла ../Dir/file1: vf);for
Подстока 160 файла ../Dir/file1: auto&&i:vi){std::cout<<i<<std::endl;}GoalKicker
Подстока 161 файла ../Dir/file1: com–C++NotesforProfessionals423}Section77
Подстока 162 файла ../Dir/file1: 12:DefaulttemplateparametervalueJustlikeincaseofthefunctionarguments,templateparameterscanhavetheirdefaultvalues
Подстока 163 файла ../Dir/file1: Alltemplateparameterswithadefaultvaluehavetobedeclaredattheendofthetemplateparameterlist
Подстока 164 файла ../Dir/file1: Thebasicideaisthatthetemplateparameterswithdefaultvaluecanbeomittedwhiletemplateinstantiation
Подстока 165 файла ../Dir/file1: Simpleexampleofdefaulttemplateparametervalueusage:template<classT,size_tN
Подстока 166 файла ../Dir/file1: 10>structmy_array{Tarr[N];};intmain
Подстока 167 файла ../Dir/file1: ){
Подстока 168 файла ../Dir/file1: *Defaultparameterisignored,N
Подстока 169 файла ../Dir/file1: 5*
Подстока 170 файла ../Dir/file1: my_array<int,5>a;}
Подстока 171 файла ../Dir/file1: *Printthelengthofa
Подстока 172 файла ../Dir/file1: arr:5*
Подстока 173 файла ../Dir/file1: std::cout<<sizeof
Подстока 174 файла ../Dir/file1: a
Подстока 175 файла ../Dir/file1: arr)
Подстока 176 файла ../Dir/file1: sizeof
Подстока 177 файла ../Dir/file1: int)<<std::endl;
Подстока 178 файла ../Dir/file1: *Lastparameterisomitted,N
Подстока 179 файла ../Dir/file1: 10*
Подстока 180 файла ../Dir/file1: my_array<int>b;
Подстока 181 файла ../Dir/file1: *Printthelengthofa
Подстока 182 файла ../Dir/file1: arr:10*
Подстока 183 файла ../Dir/file1: std::cout<<sizeof
Подстока 184 файла ../Dir/file1: b
Подстока 185 файла ../Dir/file1: arr)
Подстока 186 файла ../Dir/file1: sizeof
Подстока 187 файла ../Dir/file1: int)<<std::endl;GoalKicker
Подстока 188 файла ../Dir/file1: com–C++NotesforProfessionals424Chapter78:ExpressiontemplatesSection78
Подстока 189 файла ../Dir/file1: 1:AbasicexampleillustratingexpressiontemplatesAnexpressiontemplateisacompile-timeoptimizationtechniqueusedmostlyinscientificcomputing
Подстока 190 файла ../Dir/file1: It'smainpurposeistoavoidunnecessarytemporariesandoptimizeloopcalculationsusingasinglepass
Подстока 191 файла ../Dir/file1: typicallywhenperformingoperationsonnumericalaggregates)
Подстока 192 файла ../Dir/file1: ExpressiontemplateswereinitiallydevisedinordertocircumventtheinefficienciesofnaïveoperatoroverloadingwhenimplementingnumericalArrayorMatrixtypes
Подстока 193 файла ../Dir/file1: AnequivalentterminologyforexpressiontemplateshasbeenintroducedbyBjarneStroustrup,whocallsthem"fusedoperations"inthelatestversionofhisbook,"TheC++ProgrammingLanguage"
Подстока 194 файла ../Dir/file1: Beforeactuallydivingintoexpressiontemplates,youshouldunderstandwhyyouneedtheminthefirstplace
Подстока 195 файла ../Dir/file1: Toillustratethis,considertheverysimpleMatrixclassgivenbelow:template<typenameT,std::size_tCOL,std::size_tROW>classMatrix{public:usingvalue_type
Подстока 196 файла ../Dir/file1: T;Matrix
Подстока 197 файла ../Dir/file1: ):values
Подстока 198 файла ../Dir/file1: COL*ROW){}staticsize_tcols
Подстока 199 файла ../Dir/file1: ){returnCOL;}staticsize_trows
Подстока 200 файла ../Dir/file1: ){returnROW;}constT&operator
Подстока 201 файла ../Dir/file1: )
Подстока 202 файла ../Dir/file1: size_tx,size_ty)const{returnvalues[y*COL+x];}T&operator
Подстока 203 файла ../Dir/file1: )
Подстока 204 файла ../Dir/file1: size_tx,size_ty){returnvalues[y*COL+x];}private:std::vector<T>};values;template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>operator+
Подстока 205 файла ../Dir/file1: constMatrix<T,COL,ROW>&lhs,constMatrix<T,COL,ROW>&rhs){Matrix<T,COL,ROW>result;}for
Подстока 206 файла ../Dir/file1: size_ty
Подстока 207 файла ../Dir/file1: 0;y!
Подстока 208 файла ../Dir/file1: lhs
Подстока 209 файла ../Dir/file1: rows
Подстока 210 файла ../Dir/file1: );++y){for
Подстока 211 файла ../Dir/file1: size_tx
Подстока 212 файла ../Dir/file1: 0;x!
Подстока 213 файла ../Dir/file1: lhs
Подстока 214 файла ../Dir/file1: cols
Подстока 215 файла ../Dir/file1: );++x){result
Подстока 216 файла ../Dir/file1: x,y)
Подстока 217 файла ../Dir/file1: lhs
Подстока 218 файла ../Dir/file1: x,y)+rhs
Подстока 219 файла ../Dir/file1: x,y);}}returnresult;Giventhepreviousclassdefinition,youcannowwriteMatrixexpressionssuchas:conststd::size_tcols
Подстока 220 файла ../Dir/file1: 2000;conststd::size_trows
Подстока 221 файла ../Dir/file1: 1000;Matrix<double,cols,rows>a,b,c;
Подстока 222 файла ../Dir/file1: 
Подстока 223 файла ../Dir/file1: initializea,b&cfor
Подстока 224 файла ../Dir/file1: std::size_ty
Подстока 225 файла ../Dir/file1: 0;y!
Подстока 226 файла ../Dir/file1: rows;++y){for
Подстока 227 файла ../Dir/file1: std::size_tx
Подстока 228 файла ../Dir/file1: 0;x!
Подстока 229 файла ../Dir/file1: cols;++x){a
Подстока 230 файла ../Dir/file1: x,y)
Подстока 231 файла ../Dir/file1: 1
Подстока 232 файла ../Dir/file1: 0;b
Подстока 233 файла ../Dir/file1: x,y)
Подстока 234 файла ../Dir/file1: 2
Подстока 235 файла ../Dir/file1: 0;GoalKicker
Подстока 236 файла ../Dir/file1: com–C++NotesforProfessionals425}}c
Подстока 237 файла ../Dir/file1: x,y)
Подстока 238 файла ../Dir/file1: 3
Подстока 239 файла ../Dir/file1: 0;Matrix<double,cols,rows>d
Подстока 240 файла ../Dir/file1: a+b+c;
Подстока 241 файла ../Dir/file1: 
Подстока 242 файла ../Dir/file1: d
Подстока 243 файла ../Dir/file1: x,y)
Подстока 244 файла ../Dir/file1: 6Asillustratedabove,beingabletooverloadoperator+
Подстока 245 файла ../Dir/file1: )providesyouwithanotationwhichmimicsthenaturalmathematicalnotationformatrices
Подстока 246 файла ../Dir/file1: Unfortunately,thepreviousimplementationisalsohighlyinefficientcomparedtoanequivalent"hand-crafted"version
Подстока 247 файла ../Dir/file1: Tounderstandwhy,youhavetoconsiderwhathappenswhenyouwriteanexpressionsuchasMatrixd
Подстока 248 файла ../Dir/file1: a+b+c
Подстока 249 файла ../Dir/file1: Thisinfactexpandsto
Подстока 250 файла ../Dir/file1: 
Подстока 251 файла ../Dir/file1: a+b)+c)oroperator+
Подстока 252 файла ../Dir/file1: operator+
Подстока 253 файла ../Dir/file1: a,b),c)
Подстока 254 файла ../Dir/file1: Inotherwords,theloopinsideoperator+
Подстока 255 файла ../Dir/file1: )isexecutedtwice,whereasitcouldhavebeeneasilyperformedinasinglepass
Подстока 256 файла ../Dir/file1: Thisalsoresultsin2temporariesbeingcreated,whichfurtherdegradesperformance
Подстока 257 файла ../Dir/file1: Inessence,byaddingtheflexibilitytouseanotationclosetoitsmathematicalcounterpart,youhavealsomadetheMatrixclasshighlyinefficient
Подстока 258 файла ../Dir/file1: Forexample,withoutoperatoroverloading,youcouldimplementafarmoreefficientMatrixsummationusingasinglepass:template<typenameT,std::size_tCOL,std::size_tROW>Matrix<T,COL,ROW>add3
Подстока 259 файла ../Dir/file1: constMatrix<T,COL,ROW>&a,constMatrix<T,COL,ROW>&b,constMatrix<T,COL,ROW>&c){Matrix<T,COL,ROW>result;for
Подстока 260 файла ../Dir/file1: size_ty
Подстока 261 файла ../Dir/file1: 0;y!
Подстока 262 файла ../Dir/file1: ROW;++y){for
Подстока 263 файла ../Dir/file1: size_tx
Подстока 264 файла ../Dir/file1: 0;x!
Подстока 265 файла ../Dir/file1: COL;++x){result
Подстока 266 файла ../Dir/file1: x,y)
Подстока 267 файла ../Dir/file1: a
Подстока 268 файла ../Dir/file1: x,y)+b
Подстока 269 файла ../Dir/file1: x,y)+c
Подстока 270 файла ../Dir/file1: x,y);}}returnresult;}ThepreviousexamplehoweverhasitsowndisadvantagesbecauseitcreatesafarmoreconvolutedinterfacefortheMatrixclass
Подстока 271 файла ../Dir/file1: youwouldhavetoconsidermethodssuchasMatrix::add2
Подстока 272 файла ../Dir/file1: ),Matrix::AddMultiply
Подстока 273 файла ../Dir/file1: )andsoon)
Подстока 274 файла ../Dir/file1: InsteadletustakeastepbackandseehowwecanadaptoperatoroverloadingtoperforminamoreefficientwayTheproblemstemsfromthefactthattheexpressionMatrixd
Подстока 275 файла ../Dir/file1: a+b+cisevaluatedtoo"eagerly"beforeyouhavehadanopportunitytobuildtheentireexpressiontree
Подстока 276 файла ../Dir/file1: Inotherwords,whatyoureallywanttoachieveistoevaluatea+b+cinonepassandonlyonceyouactuallyneedtoassigntheresultingexpressingtod
Подстока 277 файла ../Dir/file1: Thisisthecoreideabehindexpressiontemplates:insteadofhavingoperator+
Подстока 278 файла ../Dir/file1: )evaluateimmediatelytheresultofaddingtwoMatrixinstances,itwillreturnan"expressiontemplate"forfutureevaluationoncetheentireexpressiontreehasbeenbuilt
Подстока 279 файла ../Dir/file1: Forexample,hereisapossibleimplementationforanexpressiontemplatecorrespondingtothesummationof2types:template<typenameLHS,typenameRHS>classMatrixSum{public:usingvalue_type
Подстока 280 файла ../Dir/file1: typenameLHS::value_type;GoalKicker
Подстока 281 файла ../Dir/file1: com–C++NotesforProfessionals426MatrixSum
Подстока 282 файла ../Dir/file1: constLHS&lhs,constRHS&rhs):rhs
Подстока 283 файла ../Dir/file1: rhs),lhs
Подстока 284 файла ../Dir/file1: lhs){}value_typeoperator
Подстока 285 файла ../Dir/file1: )
Подстока 286 файла ../Dir/file1: intx,inty)const{returnlhs
Подстока 287 файла ../Dir/file1: x,y)+rhs
Подстока 288 файла ../Dir/file1: x,y);}private:constLHS&lhs;constRHS&rhs;};Andhereistheupdatedversionofoperator+
Подстока 289 файла ../Dir/file1: )template<typenameLHS,typenameRHS>MatrixSum<LHS,RHS>operator+
Подстока 290 файла ../Dir/file1: constLHS&lhs,constLHS&rhs){returnMatrixSum<LHS,RHS>
Подстока 291 файла ../Dir/file1: lhs,rhs);}Asyoucansee,operator+
Подстока 292 файла ../Dir/file1: )nolongerreturnsan"eagerevaluation"oftheresultofadding2Matrixinstances
Подстока 293 файла ../Dir/file1: whichwouldbeanotherMatrixinstance),butinsteadanexpressiontemplaterepresentingtheadditionoperation
Подстока 294 файла ../Dir/file1: Themostimportantpointtokeepinmindisthattheexpressionhasnotbeenevaluatedyet
Подстока 295 файла ../Dir/file1: Itmerelyholdsreferencestoitsoperands
Подстока 296 файла ../Dir/file1: Infact,nothingstopsyoufrominstantiatingtheMatrixSum<>expressiontemplateasfollows:MatrixSum<Matrix<double>,Matrix<double>>SumAB
Подстока 297 файла ../Dir/file1: a,b);Youcanhoweveratalaterstage,whenyouactuallyneedtheresultofthesummation,evaluatetheexpressiond
Подстока 298 файла ../Dir/file1: a+basfollows:for
Подстока 299 файла ../Dir/file1: std::size_ty
Подстока 300 файла ../Dir/file1: 0;y!
Подстока 301 файла ../Dir/file1: a
Подстока 302 файла ../Dir/file1: rows
Подстока 303 файла ../Dir/file1: );++y){for
Подстока 304 файла ../Dir/file1: std::size_tx
Подстока 305 файла ../Dir/file1: 0;x!
Подстока 306 файла ../Dir/file1: a
Подстока 307 файла ../Dir/file1: cols
Подстока 308 файла ../Dir/file1: );++x){d
Подстока 309 файла ../Dir/file1: x,y)
Подстока 310 файла ../Dir/file1: SumAB
Подстока 311 файла ../Dir/file1: x,y);}}Asyoucansee,anotherbenefitofusinganexpressiontemplate,isthatyouhavebasicallymanagedtoevaluatethesumofaandbandassignittodinasinglepas

[Имя файла ../Dir/file3 ]:
Подстока 1 файла ../Dir/file3: dfdffe
Подстока 2 файла ../Dir/file3: te#$#dtyey!
Подстока 3 файла ../Dir/file3: !
Подстока 4 файла ../Dir/file3: gduheijjjjjjjj
Подстока 5 файла ../Dir/file3: jjjjjjjswwwwww++wwwwwwww<<>>wwwwww#$#www
Подстока 6 файла ../Dir/file3: wwyceyb#
Подстока 7 файла ../Dir/file3: wkkkwkkwkwkkwiiii
Подстока 8 файла ../Dir/file3: ididi

